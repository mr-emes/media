<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hukum Bacaan Mim Mati - Al-Quran Hadits Kelas 5</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Poppins:wght@300;400;600;700&display=swap');
        
        .arabic-text {
            font-family: 'Amiri', serif;
            font-size: 1.5rem;
            line-height: 1.8;
        }
        
        .bounce-in {
            animation: bounceIn 0.6s ease-out;
        }
        
        @keyframes bounceIn {
            0% { transform: scale(0.3); opacity: 0; }
            50% { transform: scale(1.05); }
            70% { transform: scale(0.9); }
            100% { transform: scale(1); opacity: 1; }
        }
        
        .slide-in {
            animation: slideIn 0.5s ease-out;
        }
        
        @keyframes slideIn {
            from { transform: translateX(-100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        .glow {
            box-shadow: 0 0 20px rgba(34, 197, 94, 0.5);
        }
        
        .card-hover {
            transition: all 0.3s ease;
        }
        
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-green-50 min-h-screen font-['Poppins']">
    <!-- Header -->
    <header class="bg-gradient-to-r from-green-600 to-blue-600 text-white py-6 shadow-lg">
        <div class="container mx-auto px-4 text-center">
            <h1 class="text-3xl md:text-4xl font-bold mb-2">🕌 Hukum Bacaan Mim Mati</h1>
            <p class="text-lg opacity-90">Al-Quran Hadits - Kelas 5 MI</p>
        </div>
    </header>

    <!-- Navigation -->
    <nav class="bg-white shadow-md sticky top-0 z-50">
        <div class="container mx-auto px-4">
            <div class="flex justify-center space-x-2 md:space-x-4 py-3">
                <button onclick="showSection('materi')" class="nav-btn bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 transition-colors">
                    📚 Materi
                </button>
                <button onclick="showSection('contoh')" class="nav-btn bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors">
                    📖 Contoh
                </button>
                <button onclick="showSection('latihan')" class="nav-btn bg-purple-500 text-white px-4 py-2 rounded-lg hover:bg-purple-600 transition-colors">
                    🎯 Latihan
                </button>
                <button onclick="showSection('kuis')" class="nav-btn bg-orange-500 text-white px-4 py-2 rounded-lg hover:bg-orange-600 transition-colors">
                    🏆 Kuis
                </button>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-8">
        <!-- Materi Section -->
        <section id="materi" class="section-content">
            <div class="bg-white rounded-xl shadow-lg p-6 md:p-8 mb-8">
                <h2 class="text-2xl md:text-3xl font-bold text-green-700 mb-6 text-center">
                    📚 Pengertian Mim Mati
                </h2>
                
                <div class="grid md:grid-cols-2 gap-6 mb-8">
                    <div class="bg-gradient-to-r from-green-100 to-blue-100 p-6 rounded-lg">
                        <h3 class="text-xl font-semibold text-green-700 mb-3">Apa itu Mim Mati?</h3>
                        <p class="text-gray-700 leading-relaxed">
                            Mim Mati adalah huruf <span class="arabic-text text-green-600 font-bold">مْ</span> yang tidak berharakat (sukun) atau berada di akhir kata.
                        </p>
                    </div>
                    
                    <div class="bg-gradient-to-r from-blue-100 to-purple-100 p-6 rounded-lg">
                        <h3 class="text-xl font-semibold text-blue-700 mb-3">Ciri-ciri Mim Mati</h3>
                        <ul class="text-gray-700 space-y-2">
                            <li>• Bertanda sukun (ْ)</li>
                            <li>• Tidak berharakat</li>
                            <li>• Bisa di tengah atau akhir kata</li>
                        </ul>
                    </div>
                </div>

                <h3 class="text-2xl font-bold text-center text-blue-700 mb-6">
                    🎯 Tiga Hukum Bacaan Mim Mati
                </h3>

                <div class="grid md:grid-cols-3 gap-6">
                    <!-- Ikhfa Syafawi -->
                    <div class="card-hover bg-gradient-to-b from-green-400 to-green-500 text-white p-6 rounded-xl">
                        <div class="text-center mb-4">
                            <div class="bg-white text-green-500 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-3 text-2xl font-bold">1</div>
                            <h4 class="text-xl font-bold">إخفاء شفوي</h4>
                            <p class="text-sm opacity-90">(Ikhfa Syafawi)</p>
                        </div>
                        <div class="space-y-3">
                            <p><strong>Huruf:</strong> <span class="arabic-text text-2xl">ب</span> (Ba)</p>
                            <p><strong>Cara Baca:</strong> Samar-samar</p>
                            <p><strong>Tanda:</strong> Dengung di bibir</p>
                        </div>
                    </div>

                    <!-- Idgham Mimi -->
                    <div class="card-hover bg-gradient-to-b from-blue-400 to-blue-500 text-white p-6 rounded-xl">
                        <div class="text-center mb-4">
                            <div class="bg-white text-blue-500 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-3 text-2xl font-bold">2</div>
                            <h4 class="text-xl font-bold">إدغام ميمي</h4>
                            <p class="text-sm opacity-90">(Idgham Mimi)</p>
                        </div>
                        <div class="space-y-3">
                            <p><strong>Huruf:</strong> <span class="arabic-text text-2xl">م</span> (Mim)</p>
                            <p><strong>Cara Baca:</strong> Dilebur dengan dengung</p>
                            <p><strong>Tanda:</strong> Tasydid + dengung</p>
                        </div>
                    </div>

                    <!-- Izhar Syafawi -->
                    <div class="card-hover bg-gradient-to-b from-purple-400 to-purple-500 text-white p-6 rounded-xl">
                        <div class="text-center mb-4">
                            <div class="bg-white text-purple-500 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-3 text-2xl font-bold">3</div>
                            <h4 class="text-xl font-bold">إظهار شفوي</h4>
                            <p class="text-sm opacity-90">(Izhar Syafawi)</p>
                        </div>
                        <div class="space-y-3">
                            <p><strong>Huruf:</strong> 26 huruf lainnya</p>
                            <p><strong>Cara Baca:</strong> Jelas dan terang</p>
                            <p><strong>Tanda:</strong> Tanpa dengung</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Contoh Section -->
        <section id="contoh" class="section-content hidden">
            <div class="bg-white rounded-xl shadow-lg p-6 md:p-8">
                <h2 class="text-2xl md:text-3xl font-bold text-blue-700 mb-6 text-center">
                    📖 Contoh-Contoh Bacaan
                </h2>

                <div class="space-y-8">
                    <!-- Ikhfa Syafawi Examples -->
                    <div class="bg-gradient-to-r from-green-50 to-green-100 p-6 rounded-lg border-l-4 border-green-500">
                        <h3 class="text-xl font-bold text-green-700 mb-4 flex items-center">
                            <span class="bg-green-500 text-white w-8 h-8 rounded-full flex items-center justify-center mr-3 text-sm">1</span>
                            Ikhfa Syafawi (مْ + ب)
                        </h3>
                        <div class="grid md:grid-cols-2 gap-4">
                            <div class="example-card bg-white p-4 rounded-lg shadow-sm">
                                <p class="arabic-text text-center text-2xl text-green-600 mb-2">أَمْ بَشَرٌ</p>
                                <p class="text-center text-gray-600">Am basyarun</p>
                                <p class="text-center text-sm text-gray-500 mt-2">Mim mati + Ba = Ikhfa Syafawi</p>
                            </div>
                            <div class="example-card bg-white p-4 rounded-lg shadow-sm">
                                <p class="arabic-text text-center text-2xl text-green-600 mb-2">هُمْ بِهِ</p>
                                <p class="text-center text-gray-600">Hum bihi</p>
                                <p class="text-center text-sm text-gray-500 mt-2">Mim mati + Ba = Ikhfa Syafawi</p>
                            </div>
                        </div>
                    </div>

                    <!-- Idgham Mimi Examples -->
                    <div class="bg-gradient-to-r from-blue-50 to-blue-100 p-6 rounded-lg border-l-4 border-blue-500">
                        <h3 class="text-xl font-bold text-blue-700 mb-4 flex items-center">
                            <span class="bg-blue-500 text-white w-8 h-8 rounded-full flex items-center justify-center mr-3 text-sm">2</span>
                            Idgham Mimi (مْ + م)
                        </h3>
                        <div class="grid md:grid-cols-2 gap-4">
                            <div class="example-card bg-white p-4 rounded-lg shadow-sm">
                                <p class="arabic-text text-center text-2xl text-blue-600 mb-2">لَهُمْ مَا</p>
                                <p class="text-center text-gray-600">Lahum maa</p>
                                <p class="text-center text-sm text-gray-500 mt-2">Mim mati + Mim = Idgham Mimi</p>
                            </div>
                            <div class="example-card bg-white p-4 rounded-lg shadow-sm">
                                <p class="arabic-text text-center text-2xl text-blue-600 mb-2">أَمْ مَنْ</p>
                                <p class="text-center text-gray-600">Am man</p>
                                <p class="text-center text-sm text-gray-500 mt-2">Mim mati + Mim = Idgham Mimi</p>
                            </div>
                        </div>
                    </div>

                    <!-- Izhar Syafawi Examples -->
                    <div class="bg-gradient-to-r from-purple-50 to-purple-100 p-6 rounded-lg border-l-4 border-purple-500">
                        <h3 class="text-xl font-bold text-purple-700 mb-4 flex items-center">
                            <span class="bg-purple-500 text-white w-8 h-8 rounded-full flex items-center justify-center mr-3 text-sm">3</span>
                            Izhar Syafawi (مْ + huruf lain)
                        </h3>
                        <div class="grid md:grid-cols-3 gap-4">
                            <div class="example-card bg-white p-4 rounded-lg shadow-sm">
                                <p class="arabic-text text-center text-2xl text-purple-600 mb-2">هُمْ فِيهَا</p>
                                <p class="text-center text-gray-600">Hum fiiha</p>
                                <p class="text-center text-sm text-gray-500 mt-2">Mim mati + Fa</p>
                            </div>
                            <div class="example-card bg-white p-4 rounded-lg shadow-sm">
                                <p class="arabic-text text-center text-2xl text-purple-600 mb-2">أَمْ لَهُمْ</p>
                                <p class="text-center text-gray-600">Am lahum</p>
                                <p class="text-center text-sm text-gray-500 mt-2">Mim mati + Lam</p>
                            </div>
                            <div class="example-card bg-white p-4 rounded-lg shadow-sm">
                                <p class="arabic-text text-center text-2xl text-purple-600 mb-2">هُمْ يُوقِنُونَ</p>
                                <p class="text-center text-gray-600">Hum yuuqinuun</p>
                                <p class="text-center text-sm text-gray-500 mt-2">Mim mati + Ya</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Latihan Section -->
        <section id="latihan" class="section-content hidden">
            <div class="bg-white rounded-xl shadow-lg p-6 md:p-8">
                <h2 class="text-2xl md:text-3xl font-bold text-purple-700 mb-6 text-center">
                    🎯 Latihan Interaktif
                </h2>

                <div class="mb-8">
                    <p class="text-center text-gray-600 mb-6">Klik pada contoh bacaan di bawah ini untuk mengetahui hukum bacaannya!</p>
                    
                    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-4" id="latihanContainer">
                        <!-- Latihan items will be generated by JavaScript -->
                    </div>
                </div>

                <div id="latihanResult" class="hidden bg-gradient-to-r from-green-100 to-blue-100 p-6 rounded-lg text-center">
                    <div id="resultContent"></div>
                    <button onclick="resetLatihan()" class="mt-4 bg-purple-500 text-white px-6 py-2 rounded-lg hover:bg-purple-600 transition-colors">
                        🔄 Latihan Lagi
                    </button>
                </div>
            </div>
        </section>

        <!-- Kuis Section -->
        <section id="kuis" class="section-content hidden">
            <div class="bg-white rounded-xl shadow-lg p-6 md:p-8">
                <h2 class="text-2xl md:text-3xl font-bold text-orange-700 mb-6 text-center">
                    🏆 Kuis Hukum Bacaan Mim Mati
                </h2>

                <div id="kuisContainer">
                    <div class="text-center mb-6">
                        <div class="bg-gradient-to-r from-orange-400 to-red-400 text-white p-4 rounded-lg inline-block">
                            <p class="text-lg font-semibold">Pertanyaan <span id="currentQuestion">1</span> dari <span id="totalQuestions">15</span></p>
                            <p class="text-sm opacity-90">Skor: <span id="score">0</span></p>
                        </div>
                    </div>

                    <div id="questionContainer" class="mb-6">
                        <!-- Questions will be generated by JavaScript -->
                    </div>

                    <div id="kuisResult" class="hidden text-center">
                        <div class="bg-gradient-to-r from-green-400 to-blue-400 text-white p-8 rounded-xl">
                            <h3 class="text-2xl font-bold mb-4">🎉 Kuis Selesai!</h3>
                            <p class="text-xl mb-4">Skor Akhir: <span id="finalScore"></span>/15</p>
                            <p class="text-lg mb-4">Nilai: <span id="finalGrade"></span></p>
                            <div id="scoreMessage" class="text-lg mb-6"></div>
                            
                            <!-- Input Nama dan Kelas -->
                            <div id="studentInfoSection" class="hidden mb-6">
                                <div class="bg-white text-gray-800 p-6 rounded-xl shadow-lg mx-auto max-w-md mb-4">
                                    <h4 class="text-xl font-bold text-green-600 mb-4">📝 Isi Data untuk Sertifikat</h4>
                                    <div class="space-y-4">
                                        <div>
                                            <label class="block text-sm font-semibold text-gray-700 mb-2">Nama Lengkap:</label>
                                            <input type="text" id="studentName" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-green-500 focus:outline-none" placeholder="Masukkan nama lengkap">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-semibold text-gray-700 mb-2">Kelas:</label>
                                            <input type="text" id="studentClass" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-green-500 focus:outline-none" placeholder="Contoh: 5A">
                                        </div>
                                        <button onclick="generateCertificate()" class="w-full bg-green-500 text-white px-6 py-3 rounded-lg hover:bg-green-600 transition-colors font-semibold">
                                            🏆 Buat Sertifikat
                                        </button>
                                    </div>
                                </div>
                            </div>
                            
                            <div id="certificateSection" class="hidden mb-6">
                                <canvas id="certificateCanvas" width="800" height="600" class="hidden"></canvas>
                                <div class="bg-white text-gray-800 p-6 rounded-xl shadow-lg mx-auto max-w-md mb-4">
                                    <div class="text-center">
                                        <h4 class="text-2xl font-bold text-green-600 mb-2">🏆 SERTIFIKAT</h4>
                                        <p class="text-lg font-semibold mb-2">KETUNTASAN BELAJAR</p>
                                        <div class="border-2 border-green-500 rounded-lg p-4 mb-4">
                                            <p class="text-sm text-gray-600 mb-2">Diberikan kepada:</p>
                                            <p class="text-xl font-bold text-green-700 mb-2" id="certificateName">SISWA BERPRESTASI</p>
                                            <p class="text-sm text-gray-600 mb-1">Kelas: <span id="certificateClass" class="font-semibold">-</span></p>
                                            <p class="text-sm text-gray-600 mb-2">Yang telah menyelesaikan</p>
                                            <p class="font-semibold text-blue-700">Kuis Hukum Bacaan Mim Mati</p>
                                            <p class="text-sm text-gray-600 mt-2">dengan nilai:</p>
                                            <p class="text-2xl font-bold text-green-600" id="certificateGrade"></p>
                                        </div>
                                        <p class="text-xs text-gray-500">Al-Quran Hadits - Kelas 5 MI</p>
                                        <p class="text-xs text-gray-500" id="certificateDate"></p>
                                    </div>
                                </div>
                                <div class="space-y-2">
                                    <button onclick="downloadCertificateImage()" class="bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition-colors mr-2">
                                        🖼️ Download Gambar
                                    </button>
                                    <button onclick="downloadCertificateText()" class="bg-blue-500 text-white px-6 py-2 rounded-lg hover:bg-blue-600 transition-colors">
                                        📄 Download Teks
                                    </button>
                                </div>
                            </div>
                            <button onclick="resetKuis()" class="bg-white text-blue-600 px-8 py-3 rounded-lg font-semibold hover:bg-gray-100 transition-colors">
                                🔄 Ulangi Kuis
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="bg-gradient-to-r from-green-600 to-blue-600 text-white py-6 mt-12">
        <div class="container mx-auto px-4 text-center">
            <p class="text-lg font-semibold mb-2">🌟 Semoga Bermanfaat! 🌟</p>
            <p class="opacity-90">Media Pembelajaran Al-Quran Hadits - Hukum Bacaan Mim Mati</p>
        </div>
    </footer>

    <script>
        // Navigation functionality - moved to bottom to avoid duplication

        // Latihan data
        const latihanData = [
            { text: "أَمْ بَشَرٌ", answer: "Ikhfa Syafawi", explanation: "Mim mati (مْ) bertemu dengan Ba (ب)" },
            { text: "لَهُمْ مَا", answer: "Idgham Mimi", explanation: "Mim mati (مْ) bertemu dengan Mim (م)" },
            { text: "هُمْ فِيهَا", answer: "Izhar Syafawi", explanation: "Mim mati (مْ) bertemu dengan Fa (ف)" },
            { text: "هُمْ بِهِ", answer: "Ikhfa Syafawi", explanation: "Mim mati (مْ) bertemu dengan Ba (ب)" },
            { text: "أَمْ مَنْ", answer: "Idgham Mimi", explanation: "Mim mati (مْ) bertemu dengan Mim (م)" },
            { text: "أَمْ لَهُمْ", answer: "Izhar Syafawi", explanation: "Mim mati (مْ) bertemu dengan Lam (ل)" }
        ];

        // Initialize latihan
        function initLatihan() {
            const container = document.getElementById('latihanContainer');
            container.innerHTML = '';
            
            latihanData.forEach((item, index) => {
                const div = document.createElement('div');
                div.className = 'latihan-item bg-gradient-to-r from-purple-100 to-pink-100 p-4 rounded-lg cursor-pointer hover:shadow-lg transition-all transform hover:scale-105';
                div.innerHTML = `
                    <p class="arabic-text text-center text-2xl text-purple-600 mb-2">${item.text}</p>
                    <p class="text-center text-gray-600 text-sm">Klik untuk melihat jawaban</p>
                `;
                div.onclick = () => showLatihanAnswer(index);
                container.appendChild(div);
            });
        }

        function showLatihanAnswer(index) {
            const item = latihanData[index];
            const resultDiv = document.getElementById('latihanResult');
            const contentDiv = document.getElementById('resultContent');
            
            contentDiv.innerHTML = `
                <div class="bounce-in">
                    <p class="arabic-text text-3xl text-green-600 mb-3">${item.text}</p>
                    <h3 class="text-2xl font-bold text-blue-700 mb-2">Jawaban: ${item.answer}</h3>
                    <p class="text-gray-700 text-lg">${item.explanation}</p>
                </div>
            `;
            
            resultDiv.classList.remove('hidden');
            resultDiv.scrollIntoView({ behavior: 'smooth' });
        }

        function resetLatihan() {
            document.getElementById('latihanResult').classList.add('hidden');
            initLatihan();
        }

        // Kuis data
        const kuisData = [
            // 10 Soal Pilihan Ganda
            {
                type: "multiple_choice",
                question: "Apa hukum bacaan untuk: أَمْ بَشَرٌ",
                options: ["Ikhfa Syafawi", "Idgham Mimi", "Izhar Syafawi", "Iqlab"],
                correct: 0,
                explanation: "Mim mati (مْ) bertemu Ba (ب) dibaca Ikhfa Syafawi"
            },
            {
                type: "multiple_choice",
                question: "Berapa huruf yang menyebabkan Izhar Syafawi?",
                options: ["1 huruf", "2 huruf", "26 huruf", "28 huruf"],
                correct: 2,
                explanation: "26 huruf selain Ba dan Mim menyebabkan Izhar Syafawi"
            },
            {
                type: "multiple_choice",
                question: "Apa hukum bacaan untuk: لَهُمْ مَا",
                options: ["Ikhfa Syafawi", "Idgham Mimi", "Izhar Syafawi", "Ghunnah"],
                correct: 1,
                explanation: "Mim mati (مْ) bertemu Mim (م) dibaca Idgham Mimi"
            },
            {
                type: "multiple_choice",
                question: "Apa hukum bacaan untuk: هُمْ فِيهَا",
                options: ["Ikhfa Syafawi", "Idgham Mimi", "Izhar Syafawi", "Ikhfa Haqiqi"],
                correct: 2,
                explanation: "Mim mati (مْ) bertemu Fa (ف) dibaca Izhar Syafawi"
            },
            {
                type: "multiple_choice",
                question: "Manakah yang BUKAN termasuk hukum bacaan Mim Mati?",
                options: ["Ikhfa Syafawi", "Idgham Mimi", "Izhar Syafawi", "Iqlab"],
                correct: 3,
                explanation: "Iqlab adalah hukum bacaan Nun Mati/Tanwin, bukan Mim Mati"
            },
            {
                type: "multiple_choice",
                question: "Bagaimana cara membaca Ikhfa Syafawi?",
                options: ["Jelas dan terang", "Samar-samar dengan dengung", "Dilebur tanpa dengung", "Dipanjangkan"],
                correct: 1,
                explanation: "Ikhfa Syafawi dibaca samar-samar dengan dengung di bibir"
            },
            {
                type: "multiple_choice",
                question: "Apa hukum bacaan untuk: هُمْ يُوقِنُونَ",
                options: ["Ikhfa Syafawi", "Idgham Mimi", "Izhar Syafawi", "Ghunnah"],
                correct: 2,
                explanation: "Mim mati (مْ) bertemu Ya (ي) dibaca Izhar Syafawi"
            },
            {
                type: "multiple_choice",
                question: "Huruf apa yang menyebabkan Ikhfa Syafawi?",
                options: ["Mim (م)", "Ba (ب)", "Fa (ف)", "Lam (ل)"],
                correct: 1,
                explanation: "Hanya huruf Ba (ب) yang menyebabkan Ikhfa Syafawi"
            },
            {
                type: "multiple_choice",
                question: "Bagaimana cara membaca Idgham Mimi?",
                options: ["Jelas tanpa dengung", "Samar-samar", "Dilebur dengan dengung", "Dipanjangkan"],
                correct: 2,
                explanation: "Idgham Mimi dibaca dengan cara dilebur dan berdengung"
            },
            {
                type: "multiple_choice",
                question: "Apa hukum bacaan untuk: أَمْ لَهُمْ",
                options: ["Ikhfa Syafawi", "Idgham Mimi", "Izhar Syafawi", "Iqlab"],
                correct: 2,
                explanation: "Mim mati (مْ) bertemu Lam (ل) dibaca Izhar Syafawi"
            },
            // 5 Soal Menjodohkan
            {
                type: "matching",
                question: "Jodohkan hukum bacaan dengan huruf yang tepat:",
                pairs: [
                    { left: "Ikhfa Syafawi", right: "Ba (ب)" },
                    { left: "Idgham Mimi", right: "Mim (م)" },
                    { left: "Izhar Syafawi", right: "Fa (ف)" }
                ],
                explanation: "Ikhfa Syafawi dengan Ba, Idgham Mimi dengan Mim, Izhar Syafawi dengan huruf lainnya"
            },
            {
                type: "matching",
                question: "Jodohkan contoh bacaan dengan hukumnya:",
                pairs: [
                    { left: "أَمْ بَشَرٌ", right: "Ikhfa Syafawi" },
                    { left: "أَمْ مَنْ", right: "Idgham Mimi" },
                    { left: "هُمْ يُوقِنُونَ", right: "Izhar Syafawi" }
                ],
                explanation: "أَمْ بَشَرٌ = Ikhfa Syafawi, أَمْ مَنْ = Idgham Mimi, هُمْ يُوقِنُونَ = Izhar Syafawi"
            },
            {
                type: "matching",
                question: "Jodohkan hukum bacaan dengan cara membacanya:",
                pairs: [
                    { left: "Ikhfa Syafawi", right: "Samar-samar dengan dengung" },
                    { left: "Idgham Mimi", right: "Dilebur dengan dengung" },
                    { left: "Izhar Syafawi", right: "Jelas dan terang" }
                ],
                explanation: "Setiap hukum bacaan memiliki cara baca yang berbeda sesuai karakteristiknya"
            },
            {
                type: "matching",
                question: "Jodohkan contoh bacaan dengan huruf setelah Mim Mati:",
                pairs: [
                    { left: "هُمْ بِهِ", right: "Ba (ب)" },
                    { left: "لَهُمْ مَا", right: "Mim (م)" },
                    { left: "هُمْ فِيهَا", right: "Fa (ف)" }
                ],
                explanation: "Huruf setelah Mim Mati menentukan hukum bacaan yang digunakan"
            },
            {
                type: "matching",
                question: "Jodohkan istilah Arab dengan artinya:",
                pairs: [
                    { left: "إخفاء شفوي", right: "Ikhfa Syafawi" },
                    { left: "إدغام ميمي", right: "Idgham Mimi" },
                    { left: "إظهار شفوي", right: "Izhar Syafawi" }
                ],
                explanation: "Setiap hukum bacaan memiliki nama dalam bahasa Arab dan Indonesia"
            }
        ];

        let currentQuestionIndex = 0;
        let kuisScore = 0;

        let matchingAnswers = {};

        function initKuis() {
            currentQuestionIndex = 0;
            kuisScore = 0;
            matchingAnswers = {};
            document.getElementById('currentQuestion').textContent = '1';
            document.getElementById('totalQuestions').textContent = kuisData.length;
            document.getElementById('score').textContent = '0';
            document.getElementById('kuisResult').classList.add('hidden');
            document.getElementById('questionContainer').classList.remove('hidden');
            showQuestion();
        }

        function showQuestion() {
            if (currentQuestionIndex >= kuisData.length) {
                showKuisResult();
                return;
            }

            const question = kuisData[currentQuestionIndex];
            const container = document.getElementById('questionContainer');
            
            if (question.type === 'multiple_choice' || question.type === 'true_false') {
                container.innerHTML = `
                    <div class="bg-gradient-to-r from-orange-50 to-yellow-50 p-6 rounded-lg border-l-4 border-orange-500">
                        <h3 class="text-xl font-semibold text-orange-700 mb-4">${question.question}</h3>
                        <div class="space-y-3">
                            ${question.options.map((option, index) => `
                                <button onclick="selectAnswer(${index})" 
                                        class="answer-btn w-full text-left p-4 bg-white border-2 border-gray-200 rounded-lg hover:border-orange-400 hover:bg-orange-50 transition-all">
                                    ${String.fromCharCode(65 + index)}. ${option}
                                </button>
                            `).join('')}
                        </div>
                    </div>
                `;
            } else if (question.type === 'matching') {
                const shuffledRight = [...question.pairs.map(p => p.right)].sort(() => Math.random() - 0.5);
                container.innerHTML = `
                    <div class="bg-gradient-to-r from-orange-50 to-yellow-50 p-6 rounded-lg border-l-4 border-orange-500">
                        <h3 class="text-xl font-semibold text-orange-700 mb-4">${question.question}</h3>
                        <p class="text-sm text-gray-600 mb-4">Klik item di Kolom A, lalu klik pasangannya di Kolom B</p>
                        <div class="grid md:grid-cols-2 gap-6">
                            <div>
                                <h4 class="font-semibold text-gray-700 mb-3">Kolom A:</h4>
                                <div class="space-y-2">
                                    ${question.pairs.map((pair, index) => `
                                        <div onclick="selectLeftItem('${pair.left}', ${index})" 
                                             class="left-item p-3 bg-blue-100 rounded-lg border-2 border-blue-200 cursor-pointer hover:bg-blue-200 transition-all">
                                            <span class="font-semibold">${index + 1}.</span> ${pair.left}
                                        </div>
                                    `).join('')}
                                </div>
                            </div>
                            <div>
                                <h4 class="font-semibold text-gray-700 mb-3">Kolom B:</h4>
                                <div class="space-y-2">
                                    ${shuffledRight.map((right, index) => `
                                        <button onclick="selectRightItem('${right}')" 
                                                class="matching-btn w-full text-left p-3 bg-white border-2 border-gray-200 rounded-lg hover:border-orange-400 hover:bg-orange-50 transition-all">
                                            <span class="font-semibold">${String.fromCharCode(65 + index)}.</span> ${right}
                                        </button>
                                    `).join('')}
                                </div>
                            </div>
                        </div>
                        <div class="mt-4 p-3 bg-gray-100 rounded-lg">
                            <p class="text-sm text-gray-600 mb-2">Jawaban Anda:</p>
                            <div id="matchingResults" class="text-sm space-y-1"></div>
                        </div>
                        <button onclick="checkMatching()" id="checkMatchingBtn" 
                                class="mt-4 bg-orange-500 text-white px-6 py-2 rounded-lg hover:bg-orange-600 transition-colors disabled:opacity-50" 
                                disabled>
                            Periksa Jawaban
                        </button>
                    </div>
                `;
                matchingAnswers = {};
                selectedMatchingItem = null;
            }
        }

        let selectedMatchingItem = null;

        function selectAnswer(selectedIndex) {
            const question = kuisData[currentQuestionIndex];
            const buttons = document.querySelectorAll('.answer-btn');
            
            buttons.forEach((btn, index) => {
                btn.disabled = true;
                if (index === question.correct) {
                    btn.classList.add('bg-green-500', 'text-white', 'border-green-500');
                } else if (index === selectedIndex && index !== question.correct) {
                    btn.classList.add('bg-red-500', 'text-white', 'border-red-500');
                }
            });

            if (selectedIndex === question.correct) {
                kuisScore++;
                document.getElementById('score').textContent = kuisScore;
            }

            // Show explanation
            setTimeout(() => {
                const container = document.getElementById('questionContainer');
                container.innerHTML += `
                    <div class="mt-4 p-4 bg-blue-100 rounded-lg border-l-4 border-blue-500">
                        <p class="text-blue-700 font-semibold">Penjelasan:</p>
                        <p class="text-blue-600">${question.explanation}</p>
                        <button onclick="nextQuestion()" class="mt-3 bg-blue-500 text-white px-6 py-2 rounded-lg hover:bg-blue-600 transition-colors">
                            ${currentQuestionIndex < kuisData.length - 1 ? 'Pertanyaan Selanjutnya' : 'Lihat Hasil'} →
                        </button>
                    </div>
                `;
            }, 1000);
        }

        function selectLeftItem(leftItem, index) {
            // Remove previous selection
            const leftItems = document.querySelectorAll('.left-item');
            leftItems.forEach(li => li.classList.remove('bg-blue-300', 'border-blue-400'));
            
            // Add selection to clicked item
            leftItems[index].classList.add('bg-blue-300', 'border-blue-400');
            selectedMatchingItem = leftItem;
        }

        function selectRightItem(rightItem) {
            if (selectedMatchingItem) {
                matchingAnswers[selectedMatchingItem] = rightItem;
                updateMatchingDisplay();
                
                // Remove selection styling
                const leftItems = document.querySelectorAll('.left-item');
                leftItems.forEach(li => li.classList.remove('bg-blue-300', 'border-blue-400'));
                selectedMatchingItem = null;
                
                // Check if all pairs are matched
                const question = kuisData[currentQuestionIndex];
                if (Object.keys(matchingAnswers).length === question.pairs.length) {
                    document.getElementById('checkMatchingBtn').disabled = false;
                }
            }
        }

        function updateMatchingDisplay() {
            const resultsDiv = document.getElementById('matchingResults');
            resultsDiv.innerHTML = '';
            
            Object.entries(matchingAnswers).forEach(([left, right]) => {
                const div = document.createElement('div');
                div.className = 'text-gray-700';
                div.innerHTML = `${left} → ${right}`;
                resultsDiv.appendChild(div);
            });
        }

        function checkMatching() {
            const question = kuisData[currentQuestionIndex];
            let correctCount = 0;
            
            question.pairs.forEach(pair => {
                if (matchingAnswers[pair.left] === pair.right) {
                    correctCount++;
                }
            });
            
            if (correctCount === question.pairs.length) {
                kuisScore++;
                document.getElementById('score').textContent = kuisScore;
            }
            
            // Show results
            const resultsDiv = document.getElementById('matchingResults');
            resultsDiv.innerHTML = '';
            
            question.pairs.forEach(pair => {
                const div = document.createElement('div');
                const isCorrect = matchingAnswers[pair.left] === pair.right;
                div.className = isCorrect ? 'text-green-600 font-semibold' : 'text-red-600';
                div.innerHTML = `${pair.left} → ${pair.right} ${isCorrect ? '✓' : '✗ (Anda: ' + matchingAnswers[pair.left] + ')'}`;
                resultsDiv.appendChild(div);
            });
            
            // Show explanation
            setTimeout(() => {
                const container = document.getElementById('questionContainer');
                container.innerHTML += `
                    <div class="mt-4 p-4 bg-blue-100 rounded-lg border-l-4 border-blue-500">
                        <p class="text-blue-700 font-semibold">Penjelasan:</p>
                        <p class="text-blue-600">${question.explanation}</p>
                        <button onclick="nextQuestion()" class="mt-3 bg-blue-500 text-white px-6 py-2 rounded-lg hover:bg-blue-600 transition-colors">
                            ${currentQuestionIndex < kuisData.length - 1 ? 'Pertanyaan Selanjutnya' : 'Lihat Hasil'} →
                        </button>
                    </div>
                `;
            }, 1000);
        }

        function nextQuestion() {
            currentQuestionIndex++;
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            showQuestion();
        }

        function showKuisResult() {
            document.getElementById('questionContainer').classList.add('hidden');
            document.getElementById('kuisResult').classList.remove('hidden');
            document.getElementById('finalScore').textContent = kuisScore;
            
            // Calculate grade (nilai)
            const grade = Math.round((kuisScore / kuisData.length) * 100);
            document.getElementById('finalGrade').textContent = grade;
            
            let message = '';
            if (grade >= 90) {
                message = '🌟 Sempurna! Kamu sangat memahami materi ini!';
            } else if (grade >= 80) {
                message = '👏 Bagus sekali! Kamu hampir menguasai semua materi!';
            } else if (grade >= 70) {
                message = '👍 Baik! Kamu sudah tuntas dalam materi ini!';
            } else if (grade >= 60) {
                message = '📚 Cukup baik! Terus belajar ya!';
            } else {
                message = '💪 Jangan menyerah! Coba pelajari materi lagi!';
            }
            
            document.getElementById('scoreMessage').textContent = message;
            
            // Show student info input if grade >= 70
            if (grade >= 70) {
                document.getElementById('studentInfoSection').classList.remove('hidden');
            }
        }

        function resetKuis() {
            document.getElementById('questionContainer').classList.remove('hidden');
            document.getElementById('certificateSection').classList.add('hidden');
            document.getElementById('studentInfoSection').classList.add('hidden');
            document.getElementById('studentName').value = '';
            document.getElementById('studentClass').value = '';
            initKuis();
        }

        function generateCertificate() {
            const name = document.getElementById('studentName').value.trim();
            const studentClass = document.getElementById('studentClass').value.trim();
            
            if (!name || !studentClass) {
                alert('Mohon isi nama dan kelas terlebih dahulu!');
                return;
            }
            
            const grade = Math.round((kuisScore / kuisData.length) * 100);
            
            // Update certificate display
            document.getElementById('certificateName').textContent = name.toUpperCase();
            document.getElementById('certificateClass').textContent = studentClass;
            document.getElementById('certificateGrade').textContent = grade;
            
            // Set current date
            const now = new Date();
            const dateStr = now.toLocaleDateString('id-ID', { 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            });
            document.getElementById('certificateDate').textContent = dateStr;
            
            // Hide input section and show certificate
            document.getElementById('studentInfoSection').classList.add('hidden');
            document.getElementById('certificateSection').classList.remove('hidden');
            
            // Generate certificate image
            generateCertificateImage(name, studentClass, grade, dateStr);
        }

        function generateCertificateImage(name, studentClass, grade, date) {
            const canvas = document.getElementById('certificateCanvas');
            const ctx = canvas.getContext('2d');
            
            // Set canvas size
            canvas.width = 800;
            canvas.height = 600;
            
            // Background gradient
            const gradient = ctx.createLinearGradient(0, 0, 800, 600);
            gradient.addColorStop(0, '#f0f9ff');
            gradient.addColorStop(0.5, '#e0f2fe');
            gradient.addColorStop(1, '#f0f9ff');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, 800, 600);
            
            // Border
            ctx.strokeStyle = '#059669';
            ctx.lineWidth = 8;
            ctx.strokeRect(20, 20, 760, 560);
            
            // Inner border
            ctx.strokeStyle = '#10b981';
            ctx.lineWidth = 2;
            ctx.strokeRect(40, 40, 720, 520);
            
            // Title
            ctx.fillStyle = '#059669';
            ctx.font = 'bold 48px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('🏆 SERTIFIKAT 🏆', 400, 120);
            
            ctx.font = 'bold 32px Arial';
            ctx.fillText('KETUNTASAN BELAJAR', 400, 160);
            
            // Content
            ctx.fillStyle = '#374151';
            ctx.font = '24px Arial';
            ctx.fillText('Diberikan kepada:', 400, 220);
            
            ctx.fillStyle = '#059669';
            ctx.font = 'bold 36px Arial';
            ctx.fillText(name.toUpperCase(), 400, 270);
            
            ctx.fillStyle = '#374151';
            ctx.font = '20px Arial';
            ctx.fillText(`Kelas: ${studentClass}`, 400, 300);
            
            ctx.font = '24px Arial';
            ctx.fillText('Yang telah menyelesaikan', 400, 340);
            
            ctx.fillStyle = '#2563eb';
            ctx.font = 'bold 28px Arial';
            ctx.fillText('Kuis Hukum Bacaan Mim Mati', 400, 380);
            
            ctx.fillStyle = '#374151';
            ctx.font = '24px Arial';
            ctx.fillText('dengan nilai:', 400, 420);
            
            ctx.fillStyle = '#059669';
            ctx.font = 'bold 48px Arial';
            ctx.fillText(grade, 400, 470);
            
            // Footer
            ctx.fillStyle = '#6b7280';
            ctx.font = '18px Arial';
            ctx.fillText('Al-Quran Hadits - Kelas 5 MI', 400, 520);
            ctx.fillText(date, 400, 545);
        }

        function downloadCertificateImage() {
            const canvas = document.getElementById('certificateCanvas');
            const name = document.getElementById('certificateName').textContent;
            const grade = document.getElementById('certificateGrade').textContent;
            
            // Create download link
            const link = document.createElement('a');
            link.download = `Sertifikat_${name.replace(/\s+/g, '_')}_${grade}.png`;
            link.href = canvas.toDataURL('image/png');
            link.click();
            
            alert('Sertifikat gambar berhasil didownload!');
        }

        function downloadCertificateText() {
            const name = document.getElementById('certificateName').textContent;
            const studentClass = document.getElementById('certificateClass').textContent;
            const grade = document.getElementById('certificateGrade').textContent;
            const date = document.getElementById('certificateDate').textContent;
            
            const certificateText = `🏆 SERTIFIKAT KETUNTASAN BELAJAR 🏆

Diberikan kepada:
${name}
Kelas: ${studentClass}

Yang telah menyelesaikan
Kuis Hukum Bacaan Mim Mati
Al-Quran Hadits - Kelas 5 MI

dengan nilai: ${grade}

${date}

Selamat! Anda telah tuntas dalam materi Hukum Bacaan Mim Mati.`;
            
            // Create downloadable file
            const blob = new Blob([certificateText], { type: 'text/plain' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `Sertifikat_${name.replace(/\s+/g, '_')}_${grade}.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            window.URL.revokeObjectURL(url);
            
            alert('Sertifikat teks berhasil didownload!');
        }

        function fallbackCopyTextToClipboard(text) {
            const textArea = document.createElement("textarea");
            textArea.value = text;
            textArea.style.position = "fixed";
            textArea.style.left = "-999999px";
            textArea.style.top = "-999999px";
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            
            try {
                document.execCommand('copy');
                alert('Sertifikat berhasil disalin ke clipboard! Anda bisa paste di aplikasi lain.');
            } catch (err) {
                alert('Tidak dapat menyalin sertifikat. Silakan screenshot sertifikat di atas.');
            }
            
            document.body.removeChild(textArea);
        }

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            showSection('materi');
            initLatihan();
        });

        // Also initialize when latihan section is shown
        function showSection(sectionName) {
            // Hide all sections
            const sections = document.querySelectorAll('.section-content');
            sections.forEach(section => {
                section.classList.add('hidden');
            });
            
            // Show selected section
            document.getElementById(sectionName).classList.remove('hidden');
            document.getElementById(sectionName).classList.add('slide-in');
            
            // Initialize latihan when section is shown
            if (sectionName === 'latihan') {
                setTimeout(() => {
                    initLatihan();
                }, 100);
            }
            
            // Initialize kuis when section is shown
            if (sectionName === 'kuis') {
                setTimeout(() => {
                    initKuis();
                }, 100);
            }
            
            // Update nav buttons
            const navButtons = document.querySelectorAll('.nav-btn');
            navButtons.forEach(btn => {
                btn.classList.remove('glow');
            });
            if (event && event.target) {
                event.target.classList.add('glow');
            }
        }
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'96cfda26b52ea3dc',t:'MTc1NDgzMjY3Mi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
