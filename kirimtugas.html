<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistem Pengumpulan Tugas Siswa</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; }
        .demo-badge {
            position: fixed;
            top: 10px;
            right: 10px;
            background: #ef4444;
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            z-index: 1000;
            box-shadow: 0 4px 12px rgba(239, 68, 68, 0.3);
        }
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 12px 24px;
            border-radius: 8px;
            color: white;
            font-weight: 500;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            z-index: 1000;
            animation: slideIn 0.3s ease-out;
        }
        @keyframes slideIn {
            from { transform: translateX(100%); }
            to { transform: translateX(0); }
        }
        .button-loading {
            position: relative;
        }
        .button-loading::after {
            content: "";
            position: absolute;
            width: 16px;
            height: 16px;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            margin: auto;
            border: 4px solid transparent;
            border-top-color: #ffffff;
            border-radius: 50%;
            animation: button-loading-spinner 1s ease infinite;
        }
        @keyframes button-loading-spinner {
            from { transform: rotate(0turn); }
            to { transform: rotate(1turn); }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen">
    <div class="container mx-auto px-4 py-8">
        <!-- Header -->
        <div class="text-center mb-8">
            <div class="flex items-center justify-center gap-6 mb-2">
                <img src="https://i.imgur.com/0Laf7Zu.png" alt="Logo Sekolah" class="w-20 h-20 object-contain">
                <div class="text-left">
                    <p class="text-lg text-gray-600 mb-1">Sistem Pengiriman Tugas Siswa</p>
                    <h1 class="text-4xl font-bold text-gray-800 mb-1">MIN SINGKAWANG</h1>
                    <p class="text-gray-600">Madrasah Maju, Bermutu, Mendunia</p>
                </div>
            </div>
        </div>

        <!-- Role Selector -->
        <div class="flex justify-center mb-8">
            <div class="bg-white rounded-lg p-2 shadow-lg">
                <button id="studentBtn" class="px-6 py-3 rounded-lg font-semibold transition-all duration-300 bg-blue-500 text-white">
                    👨‍🎓 Siswa
                </button>
                <button id="teacherBtn" class="px-6 py-3 rounded-lg font-semibold transition-all duration-300 text-gray-600 hover:bg-gray-100">
                    👩‍🏫 Guru
                </button>
            </div>
        </div>

        <!-- Student View -->
        <div id="studentView" class="max-w-6xl mx-auto">
            <!-- Student Login -->
            <div id="studentLogin" class="max-w-md mx-auto mb-8">
                <div class="bg-white rounded-xl shadow-lg p-8 text-center">
                    <h2 class="text-2xl font-bold text-gray-800 mb-6">🔐 Login Siswa</h2>
                    <div class="space-y-4">
                        <input type="text" id="nisInput" placeholder="Masukkan NIS Anda" 
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-center text-lg">
                        <button id="loginBtn" class="w-full bg-blue-500 hover:bg-blue-600 text-white font-semibold py-3 px-6 rounded-lg transition-colors">
                            🚀 Masuk
                        </button>
                    </div>
                    <div class="mt-4 text-sm text-gray-500">
                        <p>Masukkan NIS yang terdaftar di Google Sheets</p>
                    </div>
                </div>
            </div>

            <!-- Student Dashboard -->
            <div id="studentDashboard" class="hidden">
                <!-- Student Info -->
                <div class="bg-white rounded-xl shadow-lg p-6 mb-8">
                    <div class="flex items-center justify-between">
                        <div>
                            <h2 class="text-2xl font-bold text-gray-800" id="studentNameDisplay"></h2>
                            <p class="text-gray-600">NIS: <span id="studentNisDisplay"></span> | Kelas: <span id="studentClassDisplay"></span></p>
                        </div>
                        <button id="logoutBtn" class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg transition-colors">
                            🚪 Logout
                        </button>
                    </div>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <!-- Available Assignments -->
                    <div class="bg-white rounded-xl shadow-lg p-8">
                        <h3 class="text-2xl font-bold text-gray-800 mb-6">📋 Tugas Tersedia</h3>
                        <div id="availableAssignments" class="space-y-4">
                            <!-- Available assignments will be populated here -->
                        </div>
                    </div>

                    <!-- Submit Assignment -->
                    <div class="bg-white rounded-xl shadow-lg p-8">
                        <h3 class="text-2xl font-bold text-gray-800 mb-6">📝 Kirim Tugas</h3>
                        
                        <form id="assignmentForm" class="space-y-6">
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-2">Pilih Tugas</label>
                                <select id="assignmentSelect" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                    <option value="">Pilih tugas yang akan dikumpulkan</option>
                                </select>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-2">File Tugas</label>
                                <div class="border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-blue-400 transition-colors">
                                    <input type="file" id="fileInput" class="hidden" accept=".pdf,.doc,.docx,.jpg,.jpeg,.png,.gif,.mp4,.mov,.avi,.mp3,.wav,.m4a">
                                    <div id="dropZone" class="cursor-pointer">
                                        <div class="text-4xl mb-2">📎</div>
                                        <p class="text-gray-600 mb-2">Klik untuk memilih file atau drag & drop</p>
                                        <p class="text-sm text-gray-500">📄 Dokumen: PDF, DOC, DOCX<br>🖼️ Gambar: JPG, PNG, GIF<br>🎥 Video: MP4, MOV, AVI<br>🎵 Audio: MP3, WAV, M4A<br>(Max 50MB)</p>
                                    </div>
                                    <div id="fileInfo" class="hidden">
                                        <div class="text-2xl mb-2">✅</div>
                                        <p id="fileName" class="text-green-600 font-semibold"></p>
                                        <div id="filePreview" class="mt-4"></div>
                                    </div>
                                </div>
                            </div>
                            
                            <button type="submit" class="w-full bg-blue-500 hover:bg-blue-600 text-white font-semibold py-3 px-6 rounded-lg transition-colors duration-300 transform hover:scale-105">
                                🚀 Kirim ke Google Sheets
                            </button>
                        </form>
                    </div>
                </div>

                <!-- Student Grades -->
                <div class="bg-white rounded-xl shadow-lg p-8 mt-8">
                    <h3 class="text-2xl font-bold text-gray-800 mb-6">📊 Nilai Tugas Saya</h3>
                    <div id="studentGrades" class="space-y-4">
                        <!-- Student grades will be populated here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Teacher View -->
        <div id="teacherView" class="hidden max-w-6xl mx-auto">
            <!-- Teacher Login -->
            <div id="teacherLogin" class="max-w-md mx-auto mb-8">
                <div class="bg-white rounded-xl shadow-lg p-8 text-center">
                    <h2 class="text-2xl font-bold text-gray-800 mb-6">🔐 Login Guru</h2>
                    <div class="space-y-4">
                        <input type="password" id="teacherPasswordInput" placeholder="Masukkan password guru" 
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-center text-lg">
                        <button id="teacherLoginBtn" class="w-full bg-blue-500 hover:bg-blue-600 text-white font-semibold py-3 px-6 rounded-lg transition-colors">
                            🚀 Masuk
                        </button>
                    </div>
                    <div class="mt-4 text-sm text-gray-500">
                        <p>Akses khusus untuk guru</p>
                    </div>
                </div>
            </div>

            <!-- Teacher Dashboard -->
            <div id="teacherDashboard" class="hidden">
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
                    <!-- Stats Cards -->
                    <div class="bg-white rounded-xl shadow-lg p-6 text-center">
                        <div class="text-3xl mb-2">👨‍🎓</div>
                        <div class="text-2xl font-bold text-blue-600" id="totalStudents">0</div>
                        <div class="text-gray-600">Total Siswa</div>
                    </div>
                    <div class="bg-white rounded-xl shadow-lg p-6 text-center">
                        <div class="text-3xl mb-2">📋</div>
                        <div class="text-2xl font-bold text-green-600" id="totalAssignments">0</div>
                        <div class="text-gray-600">Total Tugas</div>
                    </div>
                    <div class="bg-white rounded-xl shadow-lg p-6 text-center">
                        <div class="text-3xl mb-2">📊</div>
                        <div class="text-2xl font-bold text-purple-600" id="totalSubmissions">0</div>
                        <div class="text-gray-600">Tugas Terkumpul</div>
                    </div>
                </div>

                <div class="bg-white rounded-xl shadow-lg p-8">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold text-gray-800">📋 Manajemen Tugas & Nilai</h2>
                        <div class="flex gap-4">
                            <select id="filterClass" class="px-4 py-2 border border-gray-300 rounded-lg">
                                <option value="">🔄 Memuat kelas...</option>
                            </select>
                            <select id="filterSubject" class="px-4 py-2 border border-gray-300 rounded-lg">
                                <option value="">🔄 Memuat mata pelajaran...</option>
                            </select>
                            <button id="refreshBtn" class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg transition-colors">
                                🔄 Refresh
                            </button>
                            <button id="teacherLogoutBtn" class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg transition-colors">
                                🚪 Logout
                            </button>
                        </div>
                    </div>

                    <!-- Submissions List -->
                    <div id="submissionsList" class="space-y-4">
                        <!-- Submissions will be populated here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Success Modal -->
        <div id="successModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
            <div class="bg-white rounded-xl p-8 max-w-md mx-4 text-center">
                <div class="text-6xl mb-4">🎉</div>
                <h3 class="text-2xl font-bold text-gray-800 mb-2">Tugas Berhasil Dikirim!</h3>
                <p class="text-gray-600 mb-6">Tugas Anda telah tersimpan di Google Sheets dan siap untuk dinilai guru.</p>
                <button id="closeModal" class="bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-lg transition-colors">
                    Tutup
                </button>
            </div>
        </div>

        <!-- Grading Modal -->
        <div id="gradingModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
            <div class="bg-white rounded-xl p-8 max-w-2xl mx-4 w-full">
                <h3 class="text-2xl font-bold text-gray-800 mb-4">📊 Beri Nilai</h3>
                <div id="gradingContent">
                    <!-- Grading content will be populated here -->
                </div>
                <div class="flex gap-4 mt-6">
                    <button id="saveGrade" class="bg-green-500 hover:bg-green-600 text-white px-6 py-3 rounded-lg transition-colors flex-1">
                        💾 Simpan ke Google Sheets
                    </button>
                    <button id="closeGrading" class="bg-gray-500 hover:bg-gray-600 text-white px-6 py-3 rounded-lg transition-colors">
                        Batal
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Google Apps Script Web App URL
        const WEB_APP_URL = 'https://script.google.com/macros/s/AKfycby7GGXp49ZAGB3vHycwk5Bjdpa4SHyg8-Htj3FcYF_xnU-0EIuGHzwSUkmUI2P1cdfn/exec';
        const DRIVE_FOLDER_ID = '19_gDP_ePMBtgv3QRjt76Uzdp82xz5k7U';

        // API Functions for Google Sheets Integration
        async function getStudentData(nis) {
            try {
                const url = `${WEB_APP_URL}?action=getStudentData&nis=${encodeURIComponent(nis)}`;
                const response = await fetch(url, {
                    method: 'GET',
                    mode: 'cors'
                });
                return await response.json();
            } catch (error) {
                console.error('Error getting student data:', error);
                return {success: false, message: 'Connection error'};
            }
        }

        async function getAssignments(kelas) {
            try {
                const url = `${WEB_APP_URL}?action=getAssignments&kelas=${encodeURIComponent(kelas)}`;
                const response = await fetch(url, {
                    method: 'GET',
                    mode: 'cors'
                });
                return await response.json();
            } catch (error) {
                console.error('Error getting assignments:', error);
                return {success: false, message: 'Connection error'};
            }
        }

// Fungsi submitAssignment yang sudah diperbaiki
async function submitAssignment(assignmentData) {
    try {
        const fileInput = document.getElementById('fileInput');
        const file = fileInput.files[0];
        
        if (!file) {
            throw new Error('File tugas tidak ditemukan');
        }

        const formData = new FormData();
        formData.append('action', 'submitAssignment');
        formData.append('fileName', file.name);
        formData.append('fileType', file.type);
        formData.append('file', file);
        formData.append('data', JSON.stringify(assignmentData));

        const response = await fetch(WEB_APP_URL, {
            method: 'POST',
            body: formData
        });

        if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
        }

        return await response.json();
    } catch (error) {
        console.error('Submit error:', error);
        return {
            success: false,
            message: error.message
        };
    }
}

        async function getSubmissions(filters = {}) {
            try {
                const params = new URLSearchParams({
                    action: 'getSubmissions',
                    ...filters
                });
                
                const url = `${WEB_APP_URL}?${params.toString()}`;
                const response = await fetch(url, {
                    method: 'GET',
                    mode: 'cors'
                });
                return await response.json();
            } catch (error) {
                console.error('Error getting submissions:', error);
                return {success: false, message: 'Connection error'};
            }
        }

        async function saveGradeToSheets(gradeData) {
            try {
                const params = new URLSearchParams({
                    action: 'saveGrade',
                    nis: gradeData.nis,
                    tugas: gradeData.tugas,
                    mapel: gradeData.mapel,
                    nilai: gradeData.nilai,
                    feedback: gradeData.feedback || ''
                });
                
                const url = `${WEB_APP_URL}?${params.toString()}`;
                const response = await fetch(url, {
                    method: 'GET',
                    mode: 'cors'
                });
                return await response.json();
            } catch (error) {
                console.error('Error saving grade:', error);
                return {success: false, message: 'Connection error'};
            }
        }

        // Helper function to convert file to base64
        function fileToBase64(file) {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.onload = () => {
                    const base64String = reader.result.split(',')[1];
                    resolve(base64String);
                };
                reader.onerror = error => {
                    console.error('Error reading file:', error);
                    reject(new Error('Failed to read file'));
                };
                reader.readAsDataURL(file);
            });
        }

        // Helper function to make links clickable
        function renderClickableLinks(text) {
            if (!text) return text;
            
            const urlRegex = /(https?:\/\/[^\s]+)/g;
            return text.replace(urlRegex, url => {
                return `<a href="${url}" target="_blank" rel="noopener noreferrer" class="text-blue-500 hover:underline">${url}</a>`;
            });
        }

        // Current logged in student and teacher
        let currentStudent = null;
        let currentGradingSubmission = null;
        let currentSubmissions = [];
        let isTeacherLoggedIn = false;
        const TEACHER_PASSWORD = '197681';

        // DOM Elements
        const studentBtn = document.getElementById('studentBtn');
        const teacherBtn = document.getElementById('teacherBtn');
        const studentView = document.getElementById('studentView');
        const teacherView = document.getElementById('teacherView');
        const studentLogin = document.getElementById('studentLogin');
        const studentDashboard = document.getElementById('studentDashboard');
        const teacherLogin = document.getElementById('teacherLogin');
        const teacherDashboard = document.getElementById('teacherDashboard');
        const nisInput = document.getElementById('nisInput');
        const loginBtn = document.getElementById('loginBtn');
        const logoutBtn = document.getElementById('logoutBtn');
        const teacherPasswordInput = document.getElementById('teacherPasswordInput');
        const teacherLoginBtn = document.getElementById('teacherLoginBtn');
        const teacherLogoutBtn = document.getElementById('teacherLogoutBtn');
        const assignmentForm = document.getElementById('assignmentForm');
        const fileInput = document.getElementById('fileInput');
        const dropZone = document.getElementById('dropZone');
        const fileInfo = document.getElementById('fileInfo');
        const fileName = document.getElementById('fileName');
        const successModal = document.getElementById('successModal');
        const closeModal = document.getElementById('closeModal');
        const gradingModal = document.getElementById('gradingModal');
        const gradingContent = document.getElementById('gradingContent');
        const saveGrade = document.getElementById('saveGrade');
        const closeGrading = document.getElementById('closeGrading');

        // Role switching
        studentBtn.addEventListener('click', () => {
            studentBtn.className = 'px-6 py-3 rounded-lg font-semibold transition-all duration-300 bg-blue-500 text-white';
            teacherBtn.className = 'px-6 py-3 rounded-lg font-semibold transition-all duration-300 text-gray-600 hover:bg-gray-100';
            studentView.classList.remove('hidden');
            teacherView.classList.add('hidden');
            showStudentLogin();
        });

        teacherBtn.addEventListener('click', () => {
            teacherBtn.className = 'px-6 py-3 rounded-lg font-semibold transition-all duration-300 bg-blue-500 text-white';
            studentBtn.className = 'px-6 py-3 rounded-lg font-semibold transition-all duration-300 text-gray-600 hover:bg-gray-100';
            teacherView.classList.remove('hidden');
            studentView.classList.add('hidden');
            showTeacherLogin();
        });

        // Student login
        loginBtn.addEventListener('click', async () => {
            const nis = nisInput.value.trim();
            if (!nis) {
                showNotification('Mohon masukkan NIS!', 'red');
                return;
            }

            loginBtn.disabled = true;
            loginBtn.classList.add('button-loading');
            loginBtn.innerHTML = '<span class="opacity-0">🚀 Masuk</span>';

            try {
                const result = await getStudentData(nis);
                
                if (result.success) {
                    currentStudent = result.data;
                    showStudentDashboard();
                    showNotification(`Login berhasil! Selamat datang ${currentStudent.NAMA}`, 'green');
                } else {
                    showNotification(result.message || 'NIS tidak ditemukan!', 'red');
                }
            } catch (error) {
                showNotification('Gagal menghubungi server', 'red');
                console.error('Login error:', error);
            }

            loginBtn.disabled = false;
            loginBtn.classList.remove('button-loading');
            loginBtn.innerHTML = '🚀 Masuk';
        });

        // Teacher login
        teacherLoginBtn.addEventListener('click', () => {
            const password = teacherPasswordInput.value.trim();
            if (!password) {
                showNotification('Mohon masukkan password!', 'red');
                return;
            }

            teacherLoginBtn.disabled = true;
            teacherLoginBtn.classList.add('button-loading');
            teacherLoginBtn.innerHTML = '<span class="opacity-0">🚀 Masuk</span>';

            setTimeout(() => {
                if (password === TEACHER_PASSWORD) {
                    isTeacherLoggedIn = true;
                    showTeacherDashboard();
                    showNotification('Login guru berhasil!', 'green');
                } else {
                    showNotification('Password salah!', 'red');
                    teacherPasswordInput.value = '';
                }

                teacherLoginBtn.disabled = false;
                teacherLoginBtn.classList.remove('button-loading');
                teacherLoginBtn.innerHTML = '🚀 Masuk';
            }, 800);
        });

        // Teacher password input enter key
        teacherPasswordInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                teacherLoginBtn.click();
            }
        });

        // Teacher logout
        teacherLogoutBtn.addEventListener('click', () => {
            isTeacherLoggedIn = false;
            showTeacherLogin();
            showNotification('Anda telah logout', 'blue');
        });

        // Student logout
        logoutBtn.addEventListener('click', () => {
            currentStudent = null;
            showStudentLogin();
            showNotification('Anda telah logout', 'blue');
        });

        // Show student login
        function showStudentLogin() {
            studentLogin.classList.remove('hidden');
            studentDashboard.classList.add('hidden');
            nisInput.value = '';
        }

        // Show teacher login
        function showTeacherLogin() {
            teacherLogin.classList.remove('hidden');
            teacherDashboard.classList.add('hidden');
            teacherPasswordInput.value = '';
            isTeacherLoggedIn = false;
        }

        // Show teacher dashboard
        function showTeacherDashboard() {
            teacherLogin.classList.add('hidden');
            teacherDashboard.classList.remove('hidden');
            renderTeacherView();
        }

        // Show student dashboard
        function showStudentDashboard() {
            studentLogin.classList.add('hidden');
            studentDashboard.classList.remove('hidden');
            
            // Update student info
            document.getElementById('studentNameDisplay').textContent = currentStudent.NAMA;
            document.getElementById('studentNisDisplay').textContent = currentStudent.NIS;
            document.getElementById('studentClassDisplay').textContent = currentStudent.KELAS;
            
            renderAvailableAssignments();
            renderStudentGrades();
            populateAssignmentSelect();
        }

        // Render available assignments
        async function renderAvailableAssignments() {
            const availableAssignments = document.getElementById('availableAssignments');
            availableAssignments.innerHTML = '<div class="text-center py-4">🔄 Memuat tugas...</div>';

            try {
                const assignmentsResult = await getAssignments(currentStudent.KELAS);
                const submissionsResult = await getSubmissions({nis: currentStudent.NIS});
                
                if (!assignmentsResult.success) {
                    availableAssignments.innerHTML = `
                        <div class="text-center text-red-500 py-8">
                            <div class="text-4xl mb-2">❌</div>
                            <p>Error: ${assignmentsResult.message}</p>
                        </div>
                    `;
                    return;
                }

                const assignments = assignmentsResult.data || [];
                const submissions = submissionsResult.success ? submissionsResult.data || [] : [];
                
                if (assignments.length === 0) {
                    availableAssignments.innerHTML = `
                        <div class="text-center text-gray-500 py-8">
                            <div class="text-4xl mb-2">📚</div>
                            <p>Tidak ada tugas tersedia untuk kelas ${currentStudent.KELAS}</p>
                        </div>
                    `;
                    return;
                }

                availableAssignments.innerHTML = assignments.map(assignment => {
                    const isSubmitted = submissions.some(s => 
                        s.NIS === currentStudent.NIS && 
                        s.TUGAS === assignment.TUGAS && 
                        s.MAPEL === assignment.MAPEL
                    );

                    return `
                        <div class="border border-gray-200 rounded-lg p-4 ${isSubmitted ? 'bg-green-50 border-green-200' : ''}">
                            <div class="flex justify-between items-start mb-2">
                                <div class="flex-1">
                                    <h4 class="font-semibold text-gray-800">${renderClickableLinks(assignment.TUGAS)}</h4>
                                    <p class="text-sm text-gray-600">📚 ${assignment.MAPEL}</p>
                                    <p class="text-sm text-gray-500">📅 Deadline: ${assignment.TANGGAL}</p>
                                </div>
                                <div class="text-right">
                                    ${isSubmitted ? 
                                        '<div class="text-green-600 font-semibold">✅ Sudah Dikumpulkan</div>' :
                                        '<div class="text-orange-600 font-semibold">⏳ Belum Dikumpulkan</div>'
                                    }
                                </div>
                            </div>
                            <div class="text-sm text-gray-600 bg-gray-50 p-2 rounded">${renderClickableLinks(assignment.DETAIL_TUGAS)}</div>
                        </div>
                    `;
                }).join('');
            } catch (error) {
                console.error('Error rendering assignments:', error);
                availableAssignments.innerHTML = `
                    <div class="text-center text-red-500 py-8">
                        <div class="text-4xl mb-2">❌</div>
                        <p>Gagal memuat daftar tugas</p>
                    </div>
                `;
            }
        }

        // Populate assignment select
        async function populateAssignmentSelect() {
            const assignmentSelect = document.getElementById('assignmentSelect');
            assignmentSelect.innerHTML = '<option value="">🔄 Memuat tugas...</option>';

            try {
                const assignmentsResult = await getAssignments(currentStudent.KELAS);
                const submissionsResult = await getSubmissions({nis: currentStudent.NIS});
                
                assignmentSelect.innerHTML = '<option value="">Pilih tugas yang akan dikumpulkan</option>';
                
                if (assignmentsResult.success) {
                    const assignments = assignmentsResult.data || [];
                    const submissions = submissionsResult.success ? submissionsResult.data || [] : [];
                    
                    assignments.forEach(assignment => {
                        const isSubmitted = submissions.some(s => 
                            s.NIS === currentStudent.NIS && 
                            s.TUGAS === assignment.TUGAS && 
                            s.MAPEL === assignment.MAPEL
                        );
                        
                        if (!isSubmitted) {
                            assignmentSelect.innerHTML += `
                                <option value="${assignment.MAPEL}|${assignment.TUGAS}">
                                    ${assignment.MAPEL} - ${assignment.TUGAS}
                                </option>
                            `;
                        }
                    });
                }
            } catch (error) {
                console.error('Error populating assignments:', error);
                assignmentSelect.innerHTML = '<option value="">Gagal memuat daftar tugas</option>';
            }
        }

        // Render student grades
        async function renderStudentGrades() {
            const studentGrades = document.getElementById('studentGrades');
            studentGrades.innerHTML = '<div class="text-center py-4">🔄 Memuat nilai...</div>';

            try {
                const result = await getSubmissions({nis: currentStudent.NIS});
                
                if (!result.success) {
                    studentGrades.innerHTML = `
                        <div class="text-center text-red-500 py-8">
                            <div class="text-4xl mb-2">❌</div>
                            <p>Error: ${result.message}</p>
                        </div>
                    `;
                    return;
                }

                const grades = result.data || [];
                
                if (grades.length === 0) {
                    studentGrades.innerHTML = `
                        <div class="text-center text-gray-500 py-8">
                            <div class="text-4xl mb-2">📊</div>
                            <p>Belum ada nilai yang tersedia</p>
                        </div>
                    `;
                    return;
                }

                studentGrades.innerHTML = grades.map(grade => `
                    <div class="border border-gray-200 rounded-lg p-4">
                        <div class="flex justify-between items-start mb-3">
                            <div class="flex-1">
                                <h4 class="font-semibold text-gray-800">${grade.TUGAS}</h4>
                                <p class="text-sm text-gray-600">📚 ${grade.MAPEL}</p>
                                <p class="text-sm text-gray-500">📅 ${grade.TANGGAL}</p>
                                ${grade.FILE_NAME ? `<p class="text-sm text-gray-500">${getFileIcon(grade.FILE_TYPE)} ${grade.FILE_NAME}</p>` : ''}
                            </div>
                            <div class="text-right">
                                ${grade.NILAI ? 
                                    `<div class="text-2xl font-bold ${grade.NILAI >= 80 ? 'text-green-600' : grade.NILAI >= 70 ? 'text-yellow-600' : 'text-red-600'}">${grade.NILAI}</div>
                                     <div class="text-xs text-gray-500">
                                        ${grade.NILAI >= 80 ? '🌟 Excellent' : grade.NILAI >= 70 ? '👍 Good' : '📚 Need Improvement'}
                                     </div>` :
                                    `<div class="text-yellow-600 font-semibold">⏳ Menunggu</div>
                                     <div class="text-xs text-gray-500">Belum dinilai</div>`
                                }
                            </div>
                        </div>
                        
                        ${grade.FEEDBACK ? 
                            `<div class="mt-3 p-3 bg-blue-50 border-l-4 border-blue-400 rounded">
                                <p class="text-sm text-gray-700"><strong>💬 Feedback Guru:</strong></p>
                                <p class="text-sm text-gray-600 mt-1">${grade.FEEDBACK}</p>
                            </div>` : ''
                        }
                    </div>
                `).join('');
            } catch (error) {
                console.error('Error rendering grades:', error);
                studentGrades.innerHTML = `
                    <div class="text-center text-red-500 py-8">
                        <div class="text-4xl mb-2">❌</div>
                        <p>Gagal memuat nilai</p>
                    </div>
                `;
            }
        }

        // File handling
        dropZone.addEventListener('click', () => fileInput.click());
        
// Di dalam fungsi handleFileUpload
fileInput.addEventListener('change', (e) => {
    const file = e.target.files[0];
    if (!file) {
        console.error('Tidak ada file yang dipilih');
        return;
    }
    
    console.log('File details:', {
        name: file.name,
        size: file.size,
        type: file.type,
        lastModified: file.lastModified
    });
    
    handleFileUpload(file);
});

        function handleFileUpload(file) {
            // Validate file size (max 50MB)
            if (file.size > 50 * 1024 * 1024) {
                showNotification('File terlalu besar (maks 50MB)', 'red');
                fileInput.value = '';
                return;
            }

            fileName.textContent = file.name;
            dropZone.classList.add('hidden');
            fileInfo.classList.remove('hidden');
            
            // Create preview based on file type
            const filePreview = document.getElementById('filePreview');
            const fileType = getFileType(file.name);
            const fileUrl = URL.createObjectURL(file);
            
            switch(fileType) {
                case 'image':
                    filePreview.innerHTML = `
                        <div class="max-w-xs mx-auto">
                            <img src="${fileUrl}" alt="Preview" class="w-full h-32 object-cover rounded-lg border">
                        </div>
                    `;
                    break;
                case 'video':
                    filePreview.innerHTML = `
                        <div class="max-w-xs mx-auto">
                            <video controls class="w-full h-32 rounded-lg border">
                                <source src="${fileUrl}" type="${file.type}">
                                Browser tidak mendukung video.
                            </video>
                        </div>
                    `;
                    break;
                case 'audio':
                    filePreview.innerHTML = `
                        <div class="max-w-xs mx-auto">
                            <audio controls class="w-full">
                                <source src="${fileUrl}" type="${file.type}">
                                Browser tidak mendukung audio.
                            </audio>
                        </div>
                    `;
                    break;
                default:
                    filePreview.innerHTML = `
                        <div class="text-4xl mb-2">${getFileIcon(fileType)}</div>
                        <p class="text-sm text-gray-600">File ${fileType} siap diupload</p>
                    `;
            }
        }

        function getFileType(fileName) {
            if (!fileName || typeof fileName !== 'string') return 'document';
            const extension = fileName.split('.').pop().toLowerCase();
            if (['jpg', 'jpeg', 'png', 'gif'].includes(extension)) return 'image';
            if (['mp4', 'mov', 'avi', 'mkv'].includes(extension)) return 'video';
            if (['mp3', 'wav', 'm4a', 'aac'].includes(extension)) return 'audio';
            if (['pdf'].includes(extension)) return 'pdf';
            if (['doc', 'docx'].includes(extension)) return 'document';
            return 'document';
        }

        function getFileIcon(fileType) {
            const icons = {
                'image': '🖼️',
                'video': '🎥',
                'audio': '🎵',
                'pdf': '📄',
                'document': '📝'
            };
            return icons[fileType] || '📎';
        }

        // Drag and drop
        dropZone.addEventListener('dragover', (e) => {
            e.preventDefault();
            dropZone.classList.add('border-blue-400', 'bg-blue-50');
        });

        dropZone.addEventListener('dragleave', () => {
            dropZone.classList.remove('border-blue-400', 'bg-blue-50');
        });

        dropZone.addEventListener('drop', (e) => {
            e.preventDefault();
            dropZone.classList.remove('border-blue-400', 'bg-blue-50');
            const file = e.dataTransfer.files[0];
            if (file) {
                handleFileUpload(file);
            }
        });

        // Form submission
assignmentForm.addEventListener('submit', async (e) => {
    e.preventDefault();
    
    const fileInput = document.getElementById('fileInput');
    if (!fileInput || fileInput.files.length === 0) {
        showNotification('Mohon pilih file tugas terlebih dahulu!', 'red');
        return;
    }

    const file = fileInput.files[0];
    console.log('File yang dipilih:', file); // Debugging

    const submitBtn = e.target.querySelector('button[type="submit"]');
    const originalText = submitBtn.innerHTML;
    
    try {
        submitBtn.disabled = true;
        submitBtn.innerHTML = `
            <span class="flex items-center justify-center gap-2">
                <svg class="animate-spin h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                </svg>
                Mengirim...
            </span>
        `;

        const assignmentValue = document.getElementById('assignmentSelect').value;
        if (!assignmentValue) {
            throw new Error('Pilih tugas terlebih dahulu');
        }

        const [mapel, tugas] = assignmentValue.split('|');
        
        const result = await submitAssignment({
            tugas: tugas,
            mapel: mapel,
            kelas: currentStudent.KELAS,
            nis: currentStudent.NIS,
            nama: currentStudent.NAMA
        });

        if (result.success) {
            showNotification('Tugas berhasil dikirim!', 'green');
            assignmentForm.reset();
            fileInfo.classList.add('hidden');
            dropZone.classList.remove('hidden');
            await Promise.all([
                renderAvailableAssignments(),
                renderStudentGrades(),
                populateAssignmentSelect()
            ]);
        } else {
            throw new Error(result.message || 'Gagal mengirim tugas');
        }
    } catch (error) {
        console.error('Error pada form submission:', error);
        showNotification(error.message, 'red');
    } finally {
        submitBtn.disabled = false;
        submitBtn.innerHTML = originalText;
    }
});
        // Close modal
        closeModal.addEventListener('click', () => {
            successModal.classList.add('hidden');
        });

        // Teacher view functions
        async function renderTeacherView() {
            await updateTeacherStats();
            await populateFilters();
            await renderSubmissions();
        }

        async function updateTeacherStats() {
            document.getElementById('totalStudents').textContent = '...';
            document.getElementById('totalAssignments').textContent = '...';
            document.getElementById('totalSubmissions').textContent = '...';
            
            try {
                const result = await getSubmissions();
                
                if (result.success) {
                    const submissions = result.data || [];
                    document.getElementById('totalSubmissions').textContent = submissions.length;
                    
                    // Count unique students and assignments
                    const uniqueStudents = new Set(submissions.map(s => s.NIS)).size;
                    const uniqueAssignments = new Set(submissions.map(s => `${s.MAPEL}-${s.TUGAS}`)).size;
                    
                    document.getElementById('totalStudents').textContent = uniqueStudents;
                    document.getElementById('totalAssignments').textContent = uniqueAssignments;
                } else {
                    showNotification('Gagal memuat statistik', 'red');
                }
            } catch (error) {
                console.error('Error updating stats:', error);
                showNotification('Error memuat statistik', 'red');
            }
        }

        async function populateFilters() {
            const classFilter = document.getElementById('filterClass');
            const subjectFilter = document.getElementById('filterSubject');
            
            classFilter.innerHTML = '<option value="">🔄 Memuat kelas...</option>';
            subjectFilter.innerHTML = '<option value="">🔄 Memuat mata pelajaran...</option>';
            
            try {
                const result = await getSubmissions();
                
                if (result.success) {
                    const submissions = result.data || [];
                    
                    // Get unique classes
                    const uniqueClasses = [...new Set(submissions.map(s => s.KELAS).filter(Boolean))];
                    classFilter.innerHTML = '<option value="">Semua Kelas</option>';
                    uniqueClasses.sort().forEach(kelas => {
                        classFilter.innerHTML += `<option value="${kelas}">${kelas}</option>`;
                    });
                    
                    // Get unique subjects
                    const uniqueSubjects = [...new Set(submissions.map(s => s.MAPEL).filter(Boolean))];
                    subjectFilter.innerHTML = '<option value="">Semua Mata Pelajaran</option>';
                    uniqueSubjects.sort().forEach(mapel => {
                        subjectFilter.innerHTML += `<option value="${mapel}">${mapel}</option>`;
                    });
                }
            } catch (error) {
                console.error('Error populating filters:', error);
                showNotification('Gagal memuat filter', 'red');
            }
        }

        async function renderSubmissions() {
            const classFilter = document.getElementById('filterClass')?.value || '';
            const subjectFilter = document.getElementById('filterSubject')?.value || '';
            const submissionsList = document.getElementById('submissionsList');
            
            submissionsList.innerHTML = '<div class="text-center py-8">🔄 Memuat data tugas...</div>';
            
            try {
                const filters = {};
                if (classFilter) filters.kelas = classFilter;
                if (subjectFilter) filters.mapel = subjectFilter;
                
                const result = await getSubmissions(filters);
                
                if (!result.success) {
                    submissionsList.innerHTML = `
                        <div class="text-center text-red-500 py-8">
                            <div class="text-4xl mb-2">❌</div>
                            <p>Error: ${result.message || 'Gagal memuat data'}</p>
                        </div>
                    `;
                    return;
                }

                const submissions = result.data || [];
                
                if (submissions.length === 0) {
                    submissionsList.innerHTML = `
                        <div class="text-center text-gray-500 py-8">
                            <div class="text-4xl mb-2">📋</div>
                            <p>Tidak ada tugas yang dikumpulkan</p>
                        </div>
                    `;
                    return;
                }

                submissionsList.innerHTML = submissions.map((submission, index) => `
                    <div class="border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow">
                        <div class="flex justify-between items-start mb-4">
                            <div class="flex-1">
                                <h3 class="text-lg font-semibold text-gray-800">${submission.TUGAS || 'Tugas Tidak Diketahui'}</h3>
                                <p class="text-gray-600">👨‍🎓 ${submission.NAMA || 'Nama Tidak Diketahui'} (${submission.NIS || 'NIS Tidak Diketahui'})</p>
                                <p class="text-sm text-gray-500">📚 ${submission.MAPEL || 'Mata Pelajaran Tidak Diketahui'} | 🏫 ${submission.KELAS || 'Kelas Tidak Diketahui'}</p>
                                <p class="text-sm text-gray-500">📅 ${submission.TANGGAL || 'Tanggal Tidak Diketahui'}</p>
                                ${submission.FILE_NAME ? `<p class="text-sm text-gray-500">${getFileIcon(submission.FILE_TYPE)} ${submission.FILE_NAME}</p>` : ''}
                            </div>
                            <div class="flex items-center gap-4">
                                ${submission.NILAI ? 
                                    `<div class="text-center">
                                        <div class="text-2xl font-bold text-green-600">${submission.NILAI}</div>
                                        <div class="text-xs text-gray-500">Sudah Dinilai</div>
                                    </div>` :
                                    `<div class="text-center">
                                        <div class="text-2xl">⏳</div>
                                        <div class="text-xs text-gray-500">Belum Dinilai</div>
                                    </div>`
                                }
                            </div>
                        </div>
                        
                        ${submission.FILE_URL ? renderFilePreview(submission) : ''}
                        
                        <div class="flex gap-3 mt-4">
                            <button onclick="downloadFile('${submission.FILE_URL || '#'}', '${submission.FILE_NAME || submission.NAMA + '_' + submission.TUGAS}')" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg text-sm ${!submission.FILE_URL ? 'opacity-50 cursor-not-allowed' : ''}">
                                📥 Download
                            </button>
                            <button onclick="openGrading(${index})" class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg text-sm">
                                📊 ${submission.NILAI ? 'Edit Nilai' : 'Beri Nilai'}
                            </button>
                        </div>
                    </div>
                `).join('');
                
                // Store current submissions for grading
                currentSubmissions = submissions;
                
            } catch (error) {
                console.error('Error rendering submissions:', error);
                submissionsList.innerHTML = `
                    <div class="text-center text-red-500 py-8">
                        <div class="text-4xl mb-2">❌</div>
                        <p>Error: Gagal memuat data tugas</p>
                    </div>
                `;
            }
        }

        function renderFilePreview(submission) {
            if (!submission || !submission.FILE_NAME || !submission.FILE_TYPE) {
                return '';
            }
            const fileType = getFileType(submission.FILE_NAME || '');
            switch(fileType) {
                case 'image':
                    return `
                        <div class="mt-4 p-4 bg-gray-50 rounded-lg">
                            <h4 class="text-sm font-semibold text-gray-700 mb-2">🖼️ Preview Gambar:</h4>
                            <div class="max-w-md mx-auto">
                                <img src="${submission.FILE_URL}" alt="Tugas ${submission.NAMA || ''}" 
                                     class="w-full max-h-64 object-contain rounded-lg border shadow-sm">
                            </div>
                        </div>
                    `;
                case 'video':
                    return `
                        <div class="mt-4 p-4 bg-gray-50 rounded-lg">
                            <h4 class="text-sm font-semibold text-gray-700 mb-2">🎥 Preview Video:</h4>
                            <div class="max-w-md mx-auto">
                                <video controls class="w-full max-h-64 rounded-lg border shadow-sm">
                                    <source src="${submission.FILE_URL}" type="${submission.FILE_TYPE}">
                                    Browser tidak mendukung video.
                                </video>
                            </div>
                        </div>
                    `;
                case 'audio':
                    return `
                        <div class="mt-4 p-4 bg-gray-50 rounded-lg">
                            <h4 class="text-sm font-semibold text-gray-700 mb-2">🎵 Preview Audio:</h4>
                            <div class="max-w-md mx-auto">
                                <audio controls class="w-full">
                                    <source src="${submission.FILE_URL}" type="${submission.FILE_TYPE}">
                                    Browser tidak mendukung audio.
                                </audio>
                            </div>
                        </div>
                    `;
                case 'pdf':
                    return `
                        <div class="mt-4 p-4 bg-gray-50 rounded-lg">
                            <h4 class="text-sm font-semibold text-gray-700 mb-2">📄 File PDF:</h4>
                            <div class="text-center">
                                <div class="text-4xl mb-2">📄</div>
                                <p class="text-sm text-gray-600">File PDF siap untuk diunduh dan dilihat</p>
                                <button onclick="viewPDF('${submission.FILE_URL}')" class="mt-2 bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded text-sm">
                                    👁️ Lihat PDF
                                </button>
                            </div>
                        </div>
                    `;
                default:
                    return `
                        <div class="mt-4 p-4 bg-gray-50 rounded-lg">
                            <h4 class="text-sm font-semibold text-gray-700 mb-2">📝 File Dokumen:</h4>
                            <div class="text-center">
                                <div class="text-4xl mb-2">📎</div>
                                <p class="text-sm text-gray-600">File dokumen siap untuk diunduh</p>
                            </div>
                        </div>
                    `;
            }
        }

        // Download file from Google Drive
        function downloadFile(fileUrl, fileName) {
            if (fileUrl && fileUrl.startsWith('http')) {
                const link = document.createElement('a');
                link.href = fileUrl;
                link.download = fileName;
                link.target = '_blank';
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
            } else {
                showNotification('File URL tidak valid', 'red');
            }
        }

        // View PDF (demo)
        function viewPDF(url) {
            window.open(url, '_blank');
        }

        // Open grading modal
        function openGrading(submissionIndex) {
            if (!currentSubmissions || !currentSubmissions[submissionIndex]) {
                showNotification('Error: Data tugas tidak ditemukan', 'red');
                return;
            }
            
            currentGradingSubmission = currentSubmissions[submissionIndex];
            
            gradingContent.innerHTML = `
                <div class="space-y-4">
                    <div class="bg-gray-50 p-4 rounded-lg">
                        <h4 class="font-semibold">${currentGradingSubmission.TUGAS || 'Tugas Tidak Diketahui'}</h4>
                        <p class="text-gray-600">Siswa: ${currentGradingSubmission.NAMA || 'Nama Tidak Diketahui'} (${currentGradingSubmission.NIS || 'NIS Tidak Diketahui'})</p>
                        <p class="text-gray-600">Kelas: ${currentGradingSubmission.KELAS || 'Kelas Tidak Diketahui'} | Mapel: ${currentGradingSubmission.MAPEL || 'Mata Pelajaran Tidak Diketahui'}</p>
                        <p class="text-gray-600">Tanggal: ${currentGradingSubmission.TANGGAL || 'Tanggal Tidak Diketahui'}</p>
                        ${currentGradingSubmission.FILE_NAME ? `<p class="text-gray-600">File: ${getFileIcon(currentGradingSubmission.FILE_TYPE)} ${currentGradingSubmission.FILE_NAME}</p>` : ''}
                    </div>
                    
                    ${currentGradingSubmission.FILE_URL ? renderFilePreview(currentGradingSubmission) : ''}
                    
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-2">Nilai (0-100)</label>
                        <input type="number" id="gradeInput" min="0" max="100" value="${currentGradingSubmission.NILAI || ''}" 
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500">
                    </div>
                    
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-2">Catatan untuk Siswa</label>
                        <textarea id="feedbackInput" rows="3" 
                                  class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500"
                                  placeholder="Berikan feedback untuk siswa...">${currentGradingSubmission.FEEDBACK || ''}</textarea>
                    </div>
                </div>
            `;
            
            gradingModal.classList.remove('hidden');
        }

        // Save grade
        saveGrade.addEventListener('click', async () => {
            const grade = document.getElementById('gradeInput').value;
            const feedback = document.getElementById('feedbackInput')?.value || '';
            
            if (!grade) {
                showNotification('Mohon masukkan nilai!', 'red');
                return;
            }
            
            saveGrade.disabled = true;
            saveGrade.classList.add('button-loading');
            saveGrade.innerHTML = '<span class="opacity-0">💾 Simpan ke Google Sheets</span>';
            
            try {
                const gradeData = {
                    nis: currentGradingSubmission.NIS,
                    tugas: currentGradingSubmission.TUGAS,
                    mapel: currentGradingSubmission.MAPEL,
                    nilai: parseInt(grade),
                    feedback: feedback
                };
                
                const result = await saveGradeToSheets(gradeData);
                
                if (result.success) {
                    gradingModal.classList.add('hidden');
                    await renderSubmissions();
                    
                    // Update student view if currently logged in
                    if (currentStudent) {
                        await renderStudentGrades();
                    }
                    
                    showNotification('Nilai berhasil disimpan!', 'green');
                } else {
                    showNotification('Gagal menyimpan nilai: ' + result.message, 'red');
                }
            } catch (error) {
                console.error('Save grade error:', error);
                showNotification('Gagal menyimpan nilai. Silakan coba lagi.', 'red');
            }
            
            saveGrade.disabled = false;
            saveGrade.classList.remove('button-loading');
            saveGrade.innerHTML = '💾 Simpan ke Google Sheets';
        });

        // Close grading modal
        closeGrading.addEventListener('click', () => {
            gradingModal.classList.add('hidden');
        });

        // Filter handlers
        document.getElementById('filterClass')?.addEventListener('change', renderSubmissions);
        document.getElementById('filterSubject')?.addEventListener('change', renderSubmissions);
        document.getElementById('refreshBtn')?.addEventListener('click', renderSubmissions);

        // Notification function
        function showNotification(message, type = 'blue') {
            const colors = {
                'red': 'bg-red-500',
                'green': 'bg-green-500',
                'blue': 'bg-blue-500',
                'yellow': 'bg-yellow-500'
            };
            
            const notification = document.createElement('div');
            notification.className = `notification ${colors[type] || 'bg-blue-500'}`;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 5000);
        }

        // Initialize
        showStudentLogin();
    </script>
</body>
</html>
