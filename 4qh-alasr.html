<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Media Pembelajaran Surah Al-Ashr</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Inter:wght@400;500;600;700&display=swap');
        
        .arabic-text {
            font-family: 'Amiri', serif;
            font-size: 2.5rem;
            line-height: 2;
            text-align: right;
            direction: rtl;
        }
        
        .canvas-container {
            border: 3px dashed #3b82f6;
            border-radius: 16px;
            background: #ffffff;
        }
        
        .certificate {
            background: linear-gradient(135deg, #1e3a8a 0%, #3730a3 50%, #581c87 100%);
            border: 12px solid #fbbf24;
            box-shadow: 0 25px 50px rgba(0,0,0,0.2);
            position: relative;
        }
        
        .certificate::before {
            content: '';
            position: absolute;
            top: 20px;
            left: 20px;
            right: 20px;
            bottom: 20px;
            border: 4px solid #fcd34d;
            border-radius: 12px;
            pointer-events: none;
        }
        
        .ornament-corner {
            position: absolute;
            width: 80px;
            height: 80px;
            background: radial-gradient(circle, #fbbf24 30%, transparent 30%);
        }
        
        .game-card {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .game-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 24px rgba(0,0,0,0.15);
        }
        
        .correct {
            background: linear-gradient(135deg, #10b981, #059669) !important;
            color: white !important;
        }
        
        .incorrect {
            background: linear-gradient(135deg, #ef4444, #dc2626) !important;
            color: white !important;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-slate-50 to-blue-50 min-h-screen font-['Inter']">
    <!-- Header dengan Info Siswa -->
    <header class="bg-white shadow-xl border-b-4 border-blue-600">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <!-- Logo dan Info Aplikasi -->
                <div class="flex items-center space-x-6">
                    <div class="w-20 h-20 rounded-full overflow-hidden shadow-lg border-4 border-blue-200">
                        <img src="https://i.imgur.com/0Laf7Zu.png" alt="Logo Media Pembelajaran" class="w-full h-full object-cover">
                    </div>
                    <div>
                        <p class="text-lg font-semibold text-blue-700">Media Pembelajaran</p>
                        <h1 class="text-2xl font-bold text-gray-800">Al-Qur'an Hadits</h1>                        
                        <p class="text-sm text-gray-600">Surah Al-Ashr â€¢ Kelas 4</p>
                    </div>
                </div>

                <!-- Info Guru -->
                <div class="text-center hidden md:block">
                    <div class="bg-gradient-to-r from-blue-50 to-indigo-50 px-6 py-3 rounded-xl border-2 border-blue-200">
                        <p class="text-sm text-gray-600 mb-1">Guru Pengampu</p>
                        <p class="text-lg font-bold text-blue-800">MAHFUD SIDIK, S.Pd.I</p>
                    </div>
                </div>

                <!-- Info Siswa dan Progress -->
                <div id="studentInfo" class="text-right hidden">
                    <div class="bg-gradient-to-r from-green-50 to-emerald-50 px-6 py-4 rounded-xl border-2 border-green-200 min-w-64">
                        <div class="mb-3">
                            <p class="text-lg font-bold text-gray-800" id="studentName"></p>
                            <p class="text-green-600 font-medium" id="studentClass"></p>
                        </div>
                        
                        <!-- Progress Section -->
                        <div class="border-t border-green-200 pt-3">
                            <p class="text-sm text-gray-600 mb-2">Progress Pembelajaran</p>
                            <div class="grid grid-cols-4 gap-2">
                                <div class="text-center">
                                    <div class="w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center mx-auto mb-1">
                                        <span class="text-sm" id="materiProgress">ğŸ“š</span>
                                    </div>
                                    <p class="text-xs text-gray-600">Materi</p>
                                </div>
                                <div class="text-center">
                                    <div class="w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center mx-auto mb-1">
                                        <span class="text-sm" id="videoProgress">ğŸ¥</span>
                                    </div>
                                    <p class="text-xs text-gray-600">Video</p>
                                </div>
                                <div class="text-center">
                                    <div class="w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center mx-auto mb-1">
                                        <span class="text-sm" id="gameProgress">ğŸ®</span>
                                    </div>
                                    <p class="text-xs text-gray-600">Game</p>
                                </div>
                                <div class="text-center">
                                    <div class="w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center mx-auto mb-1">
                                        <span class="text-sm" id="latihanProgress">âœï¸</span>
                                    </div>
                                    <p class="text-xs text-gray-600">Latihan</p>
                                </div>
                            </div>
                            <div class="mt-3">
                                <div class="bg-gray-200 rounded-full h-2">
                                    <div id="overallProgress" class="bg-gradient-to-r from-green-500 to-emerald-500 h-2 rounded-full transition-all duration-500" style="width: 0%"></div>
                                </div>
                                <p class="text-xs text-gray-600 mt-1 text-center">
                                    <span id="progressPercentage">0</span>% Selesai
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Form Input Nama Siswa -->
    <div id="loginForm" class="container mx-auto px-6 py-12">
        <div class="max-w-lg mx-auto bg-white rounded-3xl shadow-2xl p-10">
            <div class="text-center mb-10">
                <div class="w-24 h-24 bg-gradient-to-br from-blue-100 to-indigo-100 rounded-full flex items-center justify-center mx-auto mb-6">
                    <span class="text-5xl">ğŸ‘¨â€ğŸ“</span>
                </div>
                <h2 class="text-3xl font-bold text-gray-800 mb-3">Selamat Datang!</h2>
                <p class="text-gray-600 text-lg">Masukkan data diri untuk memulai pembelajaran</p>
            </div>
            
            <form id="studentForm" class="space-y-8">
                <div>
                    <label class="block text-lg font-semibold text-gray-800 mb-3">Nama Lengkap</label>
                    <input type="text" id="nameInput" required 
                           class="w-full px-6 py-4 border-2 border-gray-200 rounded-xl focus:ring-4 focus:ring-blue-200 focus:border-blue-500 text-lg"
                           placeholder="Masukkan nama lengkap">
                </div>
                
                <div>
                    <label class="block text-lg font-semibold text-gray-800 mb-3">Kelas</label>
                    <select id="classInput" required 
                            class="w-full px-6 py-4 border-2 border-gray-200 rounded-xl focus:ring-4 focus:ring-blue-200 focus:border-blue-500 text-lg">
                        <option value="">Pilih Kelas</option>
                        <option value="4A">4A</option>
                        <option value="4B">4B</option>
                        <option value="4C">4C</option>
                    </select>
                </div>
                
                <button type="submit" 
                        class="w-full bg-gradient-to-r from-blue-600 to-indigo-600 text-white py-4 px-8 rounded-xl font-bold text-lg hover:from-blue-700 hover:to-indigo-700 transition duration-300 shadow-lg">
                    ğŸš€ Mulai Belajar
                </button>
            </form>
        </div>
    </div>

    <!-- Konten Pembelajaran -->
    <div id="learningContent" class="hidden">
        <div class="container mx-auto px-6 py-8">
            <!-- Tab Navigation -->
            <div class="flex flex-wrap justify-center mb-10 bg-white rounded-3xl p-3 shadow-xl">
                <button onclick="showTab('materi')" id="tab-materi" 
                        class="tab-btn px-6 py-4 mx-1 mb-2 rounded-2xl font-bold text-lg transition duration-300 bg-blue-600 text-white shadow-lg hover:bg-blue-700">
                    ğŸ“š Materi
                </button>
                <button onclick="showTab('video')" id="tab-video" 
                        class="tab-btn px-6 py-4 mx-1 mb-2 rounded-2xl font-bold text-lg transition duration-300 text-gray-700 hover:bg-blue-50 hover:text-blue-600">
                    ğŸ¥ Video
                </button>
                <button onclick="showTab('game')" id="tab-game" 
                        class="tab-btn px-6 py-4 mx-1 mb-2 rounded-2xl font-bold text-lg transition duration-300 text-gray-700 hover:bg-blue-50 hover:text-blue-600">
                    ğŸ® Game
                </button>
                <button onclick="showTab('latihan')" id="tab-latihan" 
                        class="tab-btn px-6 py-4 mx-1 mb-2 rounded-2xl font-bold text-lg transition duration-300 text-gray-700 hover:bg-blue-50 hover:text-blue-600">
                    âœï¸ Latihan
                </button>
                <button onclick="showTab('sertifikat')" id="tab-sertifikat" 
                        class="tab-btn px-6 py-4 mx-1 mb-2 rounded-2xl font-bold text-lg transition duration-300 text-gray-700 hover:bg-blue-50 hover:text-blue-600">
                    ğŸ† Sertifikat
                </button>
            </div>

            <!-- Tab Materi -->
            <div id="content-materi" class="tab-content">
                <div class="bg-white rounded-3xl shadow-2xl p-10 mb-8">
                    <h2 class="text-4xl font-bold text-center text-gray-800 mb-10">Ø³ÙÙˆØ±ÙØ©Ù Ø§Ù„Ù’Ø¹ÙØµÙ’Ø±Ù</h2>
                    
                    <!-- Bismillah -->
                    <div class="bg-gradient-to-r from-emerald-50 to-teal-50 rounded-3xl p-8 mb-10 border-2 border-emerald-200">
                        <div class="arabic-text text-center text-4xl text-emerald-800 mb-4">
                            Ø¨ÙØ³Ù’Ù…Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ø§Ù„Ø±ÙÙ‘Ø­Ù’Ù…ÙÙ°Ù†Ù Ø§Ù„Ø±ÙÙ‘Ø­ÙÙŠÙ…Ù
                        </div>
                        <p class="text-center text-emerald-700 font-semibold text-lg">Bismillahir rahmanir rahiim</p>
                        <p class="text-center text-emerald-600 mt-2">Dengan menyebut nama Allah Yang Maha Pemurah lagi Maha Penyayang</p>
                    </div>

                    <!-- Ayat-ayat -->
                    <div class="space-y-8">
                        <!-- Ayat 1 -->
                        <div class="bg-gradient-to-r from-blue-50 to-indigo-50 rounded-3xl p-8 border-2 border-blue-200">
                            <div class="grid md:grid-cols-2 gap-8 items-center">
                                <div class="text-center">
                                    <div class="arabic-text text-5xl text-blue-800 mb-4">ÙˆÙØ§Ù„Ù’Ø¹ÙØµÙ’Ø±Ù ï´¿Ù¡ï´¾</div>
                                    <p class="text-blue-700 font-bold text-xl mb-2">Wal 'ashr</p>
                                    <p class="text-blue-600 text-lg">Demi masa</p>
                                </div>
                                <div class="bg-white rounded-2xl p-6 shadow-lg">
                                    <h4 class="font-bold text-gray-800 mb-4 text-xl">Arti Per Kata:</h4>
                                    <div class="space-y-3">
                                        <div class="flex justify-between items-center p-3 bg-blue-50 rounded-xl">
                                            <span class="arabic-text text-2xl text-blue-800">ÙˆÙ</span>
                                            <span class="text-blue-700 font-semibold">wa = dan/demi</span>
                                        </div>
                                        <div class="flex justify-between items-center p-3 bg-blue-50 rounded-xl">
                                            <span class="arabic-text text-2xl text-blue-800">Ø§Ù„Ù’Ø¹ÙØµÙ’Ø±Ù</span>
                                            <span class="text-blue-700 font-semibold">al-'ashr = masa/waktu</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Ayat 2 -->
                        <div class="bg-gradient-to-r from-purple-50 to-violet-50 rounded-3xl p-8 border-2 border-purple-200">
                            <div class="grid md:grid-cols-2 gap-8 items-center">
                                <div class="text-center">
                                    <div class="arabic-text text-4xl text-purple-800 mb-4">Ø¥ÙÙ†ÙÙ‘ Ø§Ù„Ù’Ø¥ÙÙ†Ø³ÙØ§Ù†Ù Ù„ÙÙÙÙŠ Ø®ÙØ³Ù’Ø±Ù ï´¿Ù¢ï´¾</div>
                                    <p class="text-purple-700 font-bold text-xl mb-2">Innal insaana lafii khusr</p>
                                    <p class="text-purple-600 text-lg">Sesungguhnya manusia itu benar-benar dalam kerugian</p>
                                </div>
                                <div class="bg-white rounded-2xl p-6 shadow-lg">
                                    <h4 class="font-bold text-gray-800 mb-4 text-xl">Arti Per Kata:</h4>
                                    <div class="space-y-3">
                                        <div class="flex justify-between items-center p-3 bg-purple-50 rounded-xl">
                                            <span class="arabic-text text-2xl text-purple-800">Ø¥ÙÙ†ÙÙ‘</span>
                                            <span class="text-purple-700 font-semibold">inna = sesungguhnya</span>
                                        </div>
                                        <div class="flex justify-between items-center p-3 bg-purple-50 rounded-xl">
                                            <span class="arabic-text text-2xl text-purple-800">Ø§Ù„Ù’Ø¥ÙÙ†Ø³ÙØ§Ù†Ù</span>
                                            <span class="text-purple-700 font-semibold">al-insaana = manusia</span>
                                        </div>
                                        <div class="flex justify-between items-center p-3 bg-purple-50 rounded-xl">
                                            <span class="arabic-text text-2xl text-purple-800">Ù„ÙÙÙÙŠ</span>
                                            <span class="text-purple-700 font-semibold">lafii = benar-benar dalam</span>
                                        </div>
                                        <div class="flex justify-between items-center p-3 bg-purple-50 rounded-xl">
                                            <span class="arabic-text text-2xl text-purple-800">Ø®ÙØ³Ù’Ø±Ù</span>
                                            <span class="text-purple-700 font-semibold">khusr = kerugian</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Ayat 3 -->
                        <div class="bg-gradient-to-r from-green-50 to-emerald-50 rounded-3xl p-8 border-2 border-green-200">
                            <div class="text-center mb-6">
                                <div class="arabic-text text-3xl text-green-800 mb-4">Ø¥ÙÙ„ÙÙ‘Ø§ Ø§Ù„ÙÙ‘Ø°ÙÙŠÙ†Ù Ø¢Ù…ÙÙ†ÙÙˆØ§ ÙˆÙØ¹ÙÙ…ÙÙ„ÙÙˆØ§ Ø§Ù„ØµÙÙ‘Ø§Ù„ÙØ­ÙØ§ØªÙ ÙˆÙØªÙÙˆÙØ§ØµÙÙˆÙ’Ø§ Ø¨ÙØ§Ù„Ù’Ø­ÙÙ‚ÙÙ‘ ÙˆÙØªÙÙˆÙØ§ØµÙÙˆÙ’Ø§ Ø¨ÙØ§Ù„ØµÙÙ‘Ø¨Ù’Ø±Ù ï´¿Ù£ï´¾</div>
                                <p class="text-green-700 font-bold text-xl mb-2">Illalladziina aamanuu wa 'amilus shaalihaati wa tawaashau bil haqqi wa tawaashau bish shabr</p>
                                <p class="text-green-600 text-lg">Kecuali orang-orang yang beriman dan mengerjakan amal saleh dan nasehat menasehati supaya mentaati kebenaran dan nasehat menasehati supaya menetapi kesabaran</p>
                            </div>
                            <div class="bg-white rounded-2xl p-6 shadow-lg">
                                <h4 class="font-bold text-gray-800 mb-4 text-xl">Arti Per Kata:</h4>
                                <div class="grid md:grid-cols-2 gap-4">
                                    <div class="space-y-3">
                                        <div class="flex justify-between items-center p-3 bg-green-50 rounded-xl">
                                            <span class="arabic-text text-xl text-green-800">Ø¥ÙÙ„ÙÙ‘Ø§</span>
                                            <span class="text-green-700 font-semibold">illa = kecuali</span>
                                        </div>
                                        <div class="flex justify-between items-center p-3 bg-green-50 rounded-xl">
                                            <span class="arabic-text text-xl text-green-800">Ø§Ù„ÙÙ‘Ø°ÙÙŠÙ†Ù</span>
                                            <span class="text-green-700 font-semibold">alladziina = orang-orang yang</span>
                                        </div>
                                        <div class="flex justify-between items-center p-3 bg-green-50 rounded-xl">
                                            <span class="arabic-text text-xl text-green-800">Ø¢Ù…ÙÙ†ÙÙˆØ§</span>
                                            <span class="text-green-700 font-semibold">aamanuu = beriman</span>
                                        </div>
                                        <div class="flex justify-between items-center p-3 bg-green-50 rounded-xl">
                                            <span class="arabic-text text-xl text-green-800">ÙˆÙØ¹ÙÙ…ÙÙ„ÙÙˆØ§</span>
                                            <span class="text-green-700 font-semibold">wa 'amiluu = dan mengerjakan</span>
                                        </div>
                                    </div>
                                    <div class="space-y-3">
                                        <div class="flex justify-between items-center p-3 bg-green-50 rounded-xl">
                                            <span class="arabic-text text-xl text-green-800">Ø§Ù„ØµÙÙ‘Ø§Ù„ÙØ­ÙØ§ØªÙ</span>
                                            <span class="text-green-700 font-semibold">ash-shaalihaati = amal saleh</span>
                                        </div>
                                        <div class="flex justify-between items-center p-3 bg-green-50 rounded-xl">
                                            <span class="arabic-text text-xl text-green-800">ÙˆÙØªÙÙˆÙØ§ØµÙÙˆÙ’Ø§</span>
                                            <span class="text-green-700 font-semibold">wa tawaashau = dan saling menasehati</span>
                                        </div>
                                        <div class="flex justify-between items-center p-3 bg-green-50 rounded-xl">
                                            <span class="arabic-text text-xl text-green-800">Ø¨ÙØ§Ù„Ù’Ø­ÙÙ‚ÙÙ‘</span>
                                            <span class="text-green-700 font-semibold">bil haqqi = dengan kebenaran</span>
                                        </div>
                                        <div class="flex justify-between items-center p-3 bg-green-50 rounded-xl">
                                            <span class="arabic-text text-xl text-green-800">Ø¨ÙØ§Ù„ØµÙÙ‘Ø¨Ù’Ø±Ù</span>
                                            <span class="text-green-700 font-semibold">bish shabri = dengan kesabaran</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Pelajaran -->
                    <div class="mt-10 bg-gradient-to-r from-yellow-50 to-orange-50 rounded-3xl p-8 border-2 border-yellow-200">
                        <h3 class="text-2xl font-bold text-orange-800 mb-6 text-center">ğŸ’¡ Pelajaran dari Surah Al-Ashr</h3>
                        <div class="grid md:grid-cols-2 gap-6">
                            <div class="bg-white rounded-2xl p-6 shadow-lg">
                                <div class="flex items-center mb-4">
                                    <span class="text-3xl mr-4">â°</span>
                                    <h4 class="font-bold text-gray-800 text-lg">Waktu Sangat Berharga</h4>
                                </div>
                                <p class="text-gray-700">Jangan sia-siakan waktu yang telah Allah berikan kepada kita</p>
                            </div>
                            <div class="bg-white rounded-2xl p-6 shadow-lg">
                                <div class="flex items-center mb-4">
                                    <span class="text-3xl mr-4">ğŸ¤²</span>
                                    <h4 class="font-bold text-gray-800 text-lg">Beriman dan Beramal Saleh</h4>
                                </div>
                                <p class="text-gray-700">Manusia akan rugi jika tidak beriman dan beramal saleh</p>
                            </div>
                            <div class="bg-white rounded-2xl p-6 shadow-lg">
                                <div class="flex items-center mb-4">
                                    <span class="text-3xl mr-4">ğŸ¤</span>
                                    <h4 class="font-bold text-gray-800 text-lg">Saling Menasehati</h4>
                                </div>
                                <p class="text-gray-700">Pentingnya saling menasehati dalam kebaikan dan kebenaran</p>
                            </div>
                            <div class="bg-white rounded-2xl p-6 shadow-lg">
                                <div class="flex items-center mb-4">
                                    <span class="text-3xl mr-4">ğŸ’ª</span>
                                    <h4 class="font-bold text-gray-800 text-lg">Sabar adalah Kunci</h4>
                                </div>
                                <p class="text-gray-700">Sabar adalah kunci kesuksesan dalam hidup</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tab Video -->
            <div id="content-video" class="tab-content hidden">
                <div class="bg-white rounded-3xl shadow-2xl p-10">
                    <h2 class="text-3xl font-bold text-center text-gray-800 mb-10">ğŸ¥ Video Pembelajaran Metode Ummi</h2>
                    
                    <div class="max-w-4xl mx-auto">
                        <div class="bg-gradient-to-r from-red-50 to-pink-50 rounded-3xl p-8 border-2 border-red-200">
                            <div class="aspect-video rounded-2xl overflow-hidden shadow-2xl mb-8">
                                <iframe 
                                    id="youtubeVideo"
                                    width="100%" 
                                    height="100%" 
                                    src="https://www.youtube.com/embed/YFx5aGlf7AE?enablejsapi=1&origin=https://canva.com&rel=0&modestbranding=1&playsinline=1&controls=1&showinfo=0&fs=1&cc_load_policy=0&iv_load_policy=3&autohide=1" 
                                    title="Belajar Surah Al-Ashr dengan Metode Ummi" 
                                    frameborder="0" 
                                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share; fullscreen" 
                                    referrerpolicy="strict-origin-when-cross-origin" 
                                    allowfullscreen
                                    sandbox="allow-scripts allow-same-origin allow-presentation allow-popups allow-popups-to-escape-sandbox"
                                    class="rounded-2xl">
                                </iframe>
                                
                                <!-- Fallback jika video tidak bisa dimuat -->
                                <div id="videoFallback" class="hidden bg-gradient-to-r from-blue-100 to-indigo-100 rounded-2xl p-8 text-center border-2 border-blue-300">
                                    <div class="mb-6">
                                        <span class="text-6xl mb-4 block">ğŸ“º</span>
                                        <h4 class="text-2xl font-bold text-blue-800 mb-4">Video Pembelajaran</h4>
                                        <p class="text-blue-700 mb-6">Jika video tidak muncul, silakan klik tombol di bawah untuk menonton langsung di YouTube</p>
                                    </div>
                                    <div class="space-y-4">
                                        <a href="https://www.youtube.com/watch?v=YFx5aGlf7AE" 
                                           target="_blank" 
                                           class="inline-block bg-gradient-to-r from-red-600 to-red-700 text-white px-8 py-4 rounded-xl font-bold text-lg hover:from-red-700 hover:to-red-800 transition duration-300 shadow-lg">
                                            ğŸ¥ Tonton di YouTube
                                        </a>
                                        <button onclick="retryVideo()" 
                                                class="block mx-auto bg-gradient-to-r from-blue-600 to-indigo-600 text-white px-6 py-3 rounded-xl font-bold hover:from-blue-700 hover:to-indigo-700 transition duration-300">
                                            ğŸ”„ Coba Lagi
                                        </button>
                                    </div>
                                    <div class="mt-6 bg-white rounded-xl p-4">
                                        <h5 class="font-bold text-gray-800 mb-2">Tips jika video tidak muncul:</h5>
                                        <ul class="text-gray-700 text-sm space-y-1">
                                            <li>â€¢ Pastikan koneksi internet stabil</li>
                                            <li>â€¢ Refresh halaman dan coba lagi</li>
                                            <li>â€¢ Gunakan browser yang berbeda</li>
                                            <li>â€¢ Nonaktifkan ad blocker sementara</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="text-center mb-8">
                                <h3 class="text-2xl font-bold text-red-800 mb-4">Belajar Surah Al-Ashr dengan Metode Ummi</h3>
                                <p class="text-red-700 text-lg">Tonton video di atas untuk mempelajari cara membaca Surah Al-Ashr dengan benar</p>
                            </div>
                        </div>

                        <div class="mt-10 grid md:grid-cols-3 gap-8">
                            <div class="bg-gradient-to-br from-green-50 to-emerald-50 rounded-2xl p-8 text-center border-2 border-green-200">
                                <span class="text-5xl mb-4 block">ğŸ¯</span>
                                <h4 class="font-bold text-green-800 mb-3 text-xl">Tajwid yang Benar</h4>
                                <p class="text-green-700">Pelajari cara membaca dengan tajwid yang tepat sesuai kaidah</p>
                            </div>
                            <div class="bg-gradient-to-br from-blue-50 to-cyan-50 rounded-2xl p-8 text-center border-2 border-blue-200">
                                <span class="text-5xl mb-4 block">ğŸµ</span>
                                <h4 class="font-bold text-blue-800 mb-3 text-xl">Lagu Merdu</h4>
                                <p class="text-blue-700">Dengarkan bacaan dengan lagu yang indah dan mudah diingat</p>
                            </div>
                            <div class="bg-gradient-to-br from-purple-50 to-violet-50 rounded-2xl p-8 text-center border-2 border-purple-200">
                                <span class="text-5xl mb-4 block">ğŸ“š</span>
                                <h4 class="font-bold text-purple-800 mb-3 text-xl">Metode Ummi</h4>
                                <p class="text-purple-700">Belajar dengan metode yang mudah dipahami dan efektif</p>
                            </div>
                        </div>

                        <!-- Video Recording Section -->
                        <div class="mt-10 bg-gradient-to-r from-orange-50 to-red-50 rounded-3xl p-8 border-2 border-orange-200">
                            <h3 class="text-2xl font-bold text-orange-800 mb-6 text-center">ğŸ¥ Tugas Praktik Membaca</h3>
                            <p class="text-orange-700 text-center mb-8 text-lg">Setelah menonton video pembelajaran, sekarang giliran Anda untuk praktik!</p>
                            
                            <div class="max-w-4xl mx-auto">
                                <div class="bg-white rounded-2xl p-8 shadow-lg mb-6">
                                    <h4 class="text-xl font-bold text-gray-800 mb-4 text-center">ğŸ“‹ Instruksi Tugas</h4>
                                    <div class="space-y-4 text-gray-700">
                                        <div class="flex items-start space-x-3">
                                            <span class="text-2xl">1ï¸âƒ£</span>
                                            <p><strong>Persiapan:</strong> Pastikan Anda sudah menonton video pembelajaran di atas dengan seksama</p>
                                        </div>
                                        <div class="flex items-start space-x-3">
                                            <span class="text-2xl">2ï¸âƒ£</span>
                                            <p><strong>Rekam Video:</strong> Buatlah video Anda membaca Surah Al-Ashr dengan tajwid yang benar</p>
                                        </div>
                                        <div class="flex items-start space-x-3">
                                            <span class="text-2xl">3ï¸âƒ£</span>
                                            <p><strong>Durasi:</strong> Video maksimal 3 menit, pastikan suara jelas dan bacaan terdengar dengan baik</p>
                                        </div>
                                        <div class="flex items-start space-x-3">
                                            <span class="text-2xl">4ï¸âƒ£</span>
                                            <p><strong>Kirim ke Guru:</strong> Upload video Anda menggunakan tombol di bawah ini</p>
                                        </div>
                                    </div>
                                </div>

                                <!-- Recording Interface -->
                                <div class="bg-white rounded-2xl p-8 shadow-lg">
                                    <div class="text-center mb-6">
                                        <div class="w-32 h-32 bg-gradient-to-br from-red-100 to-pink-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                            <span class="text-6xl" id="recordIcon">ğŸ¥</span>
                                        </div>
                                        <h4 class="text-xl font-bold text-gray-800 mb-2">Perekaman Video</h4>
                                        <p class="text-gray-600" id="recordStatus">Siap untuk merekam</p>
                                    </div>

                                    <div class="flex flex-col items-center space-y-4">
                                        <div class="flex space-x-4">
                                            <button onclick="startRecording()" id="startBtn" 
                                                    class="bg-gradient-to-r from-red-500 to-red-600 text-white px-8 py-4 rounded-xl font-bold text-lg hover:from-red-600 hover:to-red-700 transition duration-300 shadow-lg">
                                                ğŸ”´ Mulai Rekam
                                            </button>
                                            <button onclick="stopRecording()" id="stopBtn" disabled
                                                    class="bg-gradient-to-r from-gray-400 to-gray-500 text-white px-8 py-4 rounded-xl font-bold text-lg transition duration-300 shadow-lg">
                                                â¹ï¸ Stop Rekam
                                            </button>
                                        </div>
                                        
                                        <div id="recordingTimer" class="hidden">
                                            <div class="bg-red-100 rounded-xl px-6 py-3">
                                                <span class="text-red-600 font-bold text-xl">â±ï¸ <span id="timerDisplay">00:00</span></span>
                                            </div>
                                        </div>

                                        <video id="recordedVideo" class="hidden w-full max-w-md rounded-xl shadow-lg" controls></video>
                                        
                                        <div id="uploadSection" class="hidden w-full">
                                            <div class="bg-green-50 rounded-xl p-6 border-2 border-green-200">
                                                <h5 class="font-bold text-green-800 mb-4 text-center">âœ… Video Berhasil Direkam!</h5>
                                                <div class="flex flex-col space-y-4">
                                                    <input type="text" id="videoTitle" placeholder="Judul video (opsional)" 
                                                           class="w-full px-4 py-3 border-2 border-green-200 rounded-xl focus:ring-4 focus:ring-green-200 focus:border-green-500">
                                                    <textarea id="videoNotes" placeholder="Catatan untuk guru (opsional)" rows="3"
                                                              class="w-full px-4 py-3 border-2 border-green-200 rounded-xl focus:ring-4 focus:ring-green-200 focus:border-green-500"></textarea>
                                                    <div class="flex space-x-4">
                                                        <button onclick="submitVideo()" 
                                                                class="flex-1 bg-gradient-to-r from-green-600 to-emerald-600 text-white px-6 py-4 rounded-xl font-bold hover:from-green-700 hover:to-emerald-700 transition duration-300">
                                                            ğŸ“¤ Kirim ke Guru
                                                        </button>
                                                        <button onclick="retakeVideo()" 
                                                                class="bg-gradient-to-r from-orange-500 to-orange-600 text-white px-6 py-4 rounded-xl font-bold hover:from-orange-600 hover:to-orange-700 transition duration-300">
                                                            ğŸ”„ Rekam Ulang
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Submission History -->
                                <div class="mt-8 bg-blue-50 rounded-2xl p-6 border-2 border-blue-200">
                                    <h4 class="text-xl font-bold text-blue-800 mb-4 text-center">ğŸ“‹ Riwayat Pengiriman</h4>
                                    <div id="submissionHistory" class="space-y-3">
                                        <p class="text-blue-600 text-center italic">Belum ada video yang dikirim</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tab Game -->
            <div id="content-game" class="tab-content hidden">
                <div class="bg-white rounded-3xl shadow-2xl p-10">
                    <h2 class="text-3xl font-bold text-center text-gray-800 mb-10">ğŸ® Game Tebak Arti Kata</h2>
                    
                    <div class="max-w-4xl mx-auto">
                        <div class="bg-gradient-to-r from-indigo-50 to-purple-50 rounded-3xl p-8 border-2 border-indigo-200 mb-8">
                            <div class="text-center mb-8">
                                <div class="flex justify-center items-center space-x-8 mb-6">
                                    <div class="bg-white rounded-2xl p-4 shadow-lg">
                                        <span class="text-2xl font-bold text-indigo-600">Skor: </span>
                                        <span id="gameScore" class="text-3xl font-bold text-indigo-800">0</span>
                                    </div>
                                    <div class="bg-white rounded-2xl p-4 shadow-lg">
                                        <span class="text-2xl font-bold text-purple-600">Soal: </span>
                                        <span id="currentQuestion" class="text-3xl font-bold text-purple-800">1</span>
                                        <span class="text-2xl font-bold text-purple-600">/10</span>
                                    </div>
                                </div>
                            </div>

                            <div id="gameArea">
                                <div class="text-center mb-8">
                                    <h3 class="text-2xl font-bold text-gray-800 mb-4">Apa arti dari kata ini?</h3>
                                    <div class="bg-white rounded-2xl p-8 shadow-lg mb-8">
                                        <div id="arabicWord" class="arabic-text text-6xl text-indigo-800"></div>
                                    </div>
                                </div>

                                <div id="gameOptions" class="grid md:grid-cols-2 gap-6">
                                    <!-- Options will be generated by JavaScript -->
                                </div>

                                <div id="gameResult" class="hidden text-center mt-8">
                                    <div class="bg-white rounded-2xl p-8 shadow-lg">
                                        <h3 class="text-3xl font-bold mb-4" id="resultTitle"></h3>
                                        <p class="text-xl mb-6" id="resultMessage"></p>
                                        <button onclick="nextQuestion()" 
                                                class="bg-gradient-to-r from-blue-600 to-indigo-600 text-white px-8 py-4 rounded-xl font-bold text-lg hover:from-blue-700 hover:to-indigo-700 transition duration-300">
                                            Soal Berikutnya
                                        </button>
                                    </div>
                                </div>

                                <div id="gameComplete" class="hidden text-center">
                                    <div class="bg-gradient-to-r from-green-50 to-emerald-50 rounded-2xl p-8 border-2 border-green-200">
                                        <span class="text-6xl mb-4 block">ğŸ‰</span>
                                        <h3 class="text-3xl font-bold text-green-800 mb-4">Selamat!</h3>
                                        <p class="text-xl text-green-700 mb-6">Kamu telah menyelesaikan game dengan skor <span id="finalScore" class="font-bold"></span>/10</p>
                                        <button onclick="restartGame()" 
                                                class="bg-gradient-to-r from-green-600 to-emerald-600 text-white px-8 py-4 rounded-xl font-bold text-lg hover:from-green-700 hover:to-emerald-700 transition duration-300">
                                            Main Lagi
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tab Latihan -->
            <div id="content-latihan" class="tab-content hidden">
                <div class="bg-white rounded-3xl shadow-2xl p-10">
                    <h2 class="text-3xl font-bold text-center text-gray-800 mb-10">âœï¸ Latihan Menulis Surah Al-Ashr</h2>
                    
                    <div class="max-w-6xl mx-auto">
                        <!-- Mode Selection -->
                        <div class="flex justify-center mb-8">
                            <div class="bg-gray-100 rounded-2xl p-2 flex">
                                <button onclick="setWritingMode('trace')" id="traceMode" 
                                        class="px-6 py-3 rounded-xl font-bold transition duration-300 bg-blue-600 text-white">
                                    ğŸ“ Menebalkan Tulisan
                                </button>
                                <button onclick="setWritingMode('free')" id="freeMode" 
                                        class="px-6 py-3 rounded-xl font-bold transition duration-300 text-gray-700 hover:bg-gray-200">
                                    ğŸ¨ Menulis Bebas
                                </button>
                            </div>
                        </div>

                        <!-- Tracing Exercise -->
                        <div id="tracingExercise" class="mb-8">
                            <div class="bg-gradient-to-r from-blue-50 to-indigo-50 rounded-3xl p-8 border-2 border-blue-200 mb-6">
                                <h3 class="text-2xl font-bold text-blue-800 mb-4 text-center">Latihan Menebalkan Tulisan Arab</h3>
                                <p class="text-blue-700 text-center mb-6">Tebalkan tulisan Arab di bawah ini dengan mengikuti garis putus-putus</p>
                                
                                <div class="flex justify-center mb-6">
                                    <div class="bg-white rounded-xl p-4 flex gap-4">
                                        <button onclick="selectAyat(1)" id="ayat1Btn" 
                                                class="ayat-btn px-4 py-2 rounded-lg font-bold bg-blue-600 text-white">
                                            Ayat 1
                                        </button>
                                        <button onclick="selectAyat(2)" id="ayat2Btn" 
                                                class="ayat-btn px-4 py-2 rounded-lg font-bold text-blue-600 hover:bg-blue-50">
                                            Ayat 2
                                        </button>
                                        <button onclick="selectAyat(3)" id="ayat3Btn" 
                                                class="ayat-btn px-4 py-2 rounded-lg font-bold text-blue-600 hover:bg-blue-50">
                                            Ayat 3
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <div class="canvas-container p-6 relative">
                                <canvas id="backgroundCanvas" width="1200" height="400" 
                                        class="absolute top-6 left-6 w-full h-80 rounded-2xl pointer-events-none"></canvas>
                                <canvas id="drawingCanvas" width="1200" height="400" 
                                        class="relative w-full h-80 cursor-crosshair rounded-2xl bg-transparent"></canvas>
                            </div>
                        </div>

                        <!-- Free Writing Mode -->
                        <div id="freeWriting" class="mb-8 hidden">
                            <div class="bg-gradient-to-r from-green-50 to-emerald-50 rounded-3xl p-8 border-2 border-green-200 mb-6">
                                <h3 class="text-2xl font-bold text-green-800 mb-4 text-center">Menulis Bebas</h3>
                                <p class="text-green-700 text-center mb-6">Latih menulis Arab dengan bebas di canvas kosong</p>
                            </div>
                            
                            <div class="canvas-container p-6">
                                <canvas id="freeCanvas" width="1200" height="500" 
                                        class="w-full h-96 cursor-crosshair rounded-2xl bg-white shadow-inner"></canvas>
                            </div>
                        </div>

                        <!-- Controls -->
                        <div class="flex flex-wrap justify-center gap-4 mb-8">
                            <button onclick="clearCanvas()" 
                                    class="bg-gradient-to-r from-red-500 to-red-600 text-white px-6 py-3 rounded-xl font-bold hover:from-red-600 hover:to-red-700 transition duration-300 shadow-lg">
                                ğŸ—‘ï¸ Hapus Semua
                            </button>
                            <button onclick="changeColor('black')" 
                                    class="bg-gradient-to-r from-gray-800 to-black text-white px-6 py-3 rounded-xl font-bold hover:from-gray-900 hover:to-gray-800 transition duration-300 shadow-lg">
                                âš« Hitam
                            </button>
                            <button onclick="changeColor('blue')" 
                                    class="bg-gradient-to-r from-blue-500 to-blue-600 text-white px-6 py-3 rounded-xl font-bold hover:from-blue-600 hover:to-blue-700 transition duration-300 shadow-lg">
                                ğŸ”µ Biru
                            </button>
                            <button onclick="changeColor('green')" 
                                    class="bg-gradient-to-r from-green-500 to-green-600 text-white px-6 py-3 rounded-xl font-bold hover:from-green-600 hover:to-green-700 transition duration-300 shadow-lg">
                                ğŸŸ¢ Hijau
                            </button>
                            <button onclick="changeStroke(3)" 
                                    class="bg-gradient-to-r from-gray-500 to-gray-600 text-white px-6 py-3 rounded-xl font-bold hover:from-gray-600 hover:to-gray-700 transition duration-300 shadow-lg">
                                ğŸ“ Tipis
                            </button>
                            <button onclick="changeStroke(8)" 
                                    class="bg-gradient-to-r from-gray-600 to-gray-700 text-white px-6 py-3 rounded-xl font-bold hover:from-gray-700 hover:to-gray-800 transition duration-300 shadow-lg">
                                ğŸ“ Tebal
                            </button>
                        </div>

                        <!-- Progress Tracking -->
                        <div class="bg-gradient-to-r from-purple-50 to-pink-50 rounded-3xl p-8 border-2 border-purple-200">
                            <h4 class="text-2xl font-bold text-purple-800 mb-6 text-center">ğŸ“Š Progress Latihan</h4>
                            <div class="grid md:grid-cols-3 gap-6">
                                <div class="bg-white rounded-2xl p-6 shadow-lg text-center">
                                    <div class="w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                        <span class="text-2xl" id="ayat1Progress">â­•</span>
                                    </div>
                                    <h5 class="font-bold text-purple-700 mb-2">Ayat 1</h5>
                                    <p class="text-purple-600 text-sm">ÙˆÙØ§Ù„Ù’Ø¹ÙØµÙ’Ø±Ù</p>
                                </div>
                                <div class="bg-white rounded-2xl p-6 shadow-lg text-center">
                                    <div class="w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                        <span class="text-2xl" id="ayat2Progress">â­•</span>
                                    </div>
                                    <h5 class="font-bold text-purple-700 mb-2">Ayat 2</h5>
                                    <p class="text-purple-600 text-sm">Ø¥ÙÙ†ÙÙ‘ Ø§Ù„Ù’Ø¥ÙÙ†Ø³ÙØ§Ù†Ù Ù„ÙÙÙÙŠ Ø®ÙØ³Ù’Ø±Ù</p>
                                </div>
                                <div class="bg-white rounded-2xl p-6 shadow-lg text-center">
                                    <div class="w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                        <span class="text-2xl" id="ayat3Progress">â­•</span>
                                    </div>
                                    <h5 class="font-bold text-purple-700 mb-2">Ayat 3</h5>
                                    <p class="text-purple-600 text-sm">Ø¥ÙÙ„ÙÙ‘Ø§ Ø§Ù„ÙÙ‘Ø°ÙÙŠÙ†Ù Ø¢Ù…ÙÙ†ÙÙˆØ§...</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tab Sertifikat -->
            <div id="content-sertifikat" class="tab-content hidden">
                <div class="max-w-5xl mx-auto">
                    <div class="certificate rounded-3xl p-16 text-center text-white relative overflow-hidden">
                        <!-- Corner Ornaments -->
                        <div class="ornament-corner top-0 left-0"></div>
                        <div class="ornament-corner top-0 right-0"></div>
                        <div class="ornament-corner bottom-0 left-0"></div>
                        <div class="ornament-corner bottom-0 right-0"></div>
                        
                        <div class="relative z-10">
                            <div class="mb-10">
                                <div class="w-32 h-32 bg-gradient-to-br from-yellow-300 to-yellow-500 rounded-full flex items-center justify-center mx-auto mb-6 shadow-2xl">
                                    <span class="text-6xl">ğŸ†</span>
                                </div>
                                <h2 class="text-5xl font-bold mb-4 text-yellow-200">SERTIFIKAT</h2>
                                <div class="w-32 h-1 bg-yellow-400 mx-auto mb-4"></div>
                                <p class="text-2xl font-semibold">Media Pembelajaran Al-Quran Hadits</p>
                            </div>

                            <div class="mb-10">
                                <p class="text-xl mb-6">Dengan bangga diberikan kepada:</p>
                                <div class="bg-white bg-opacity-20 rounded-2xl p-8 mb-6">
                                    <h3 id="certificateName" class="text-4xl font-bold mb-4 text-yellow-300">-</h3>
                                    <p class="text-xl">Kelas: <span id="certificateClass" class="font-bold text-yellow-300">-</span></p>
                                </div>
                            </div>

                            <div class="mb-10">
                                <p class="text-xl mb-6">Telah berhasil menyelesaikan pembelajaran</p>
                                <div class="bg-gradient-to-r from-yellow-400 to-yellow-500 text-blue-900 rounded-2xl p-6 mb-6">
                                    <h4 class="text-3xl font-bold mb-2">SURAH AL-ASHR</h4>
                                    <p class="text-lg font-semibold">Ø³ÙÙˆØ±ÙØ©Ù Ø§Ù„Ù’Ø¹ÙØµÙ’Ø±Ù</p>
                                </div>
                                <p class="text-lg">dengan prestasi yang membanggakan</p>
                            </div>

                            <div class="flex justify-center items-center space-x-12 mb-10">
                                <div class="text-center">
                                    <div class="w-20 h-20 bg-yellow-400 rounded-full flex items-center justify-center mx-auto mb-3 shadow-lg">
                                        <span class="text-3xl">ğŸ“š</span>
                                    </div>
                                    <p class="font-semibold">Materi</p>
                                    <p class="text-sm opacity-90">Dipelajari</p>
                                </div>
                                <div class="text-center">
                                    <div class="w-20 h-20 bg-yellow-400 rounded-full flex items-center justify-center mx-auto mb-3 shadow-lg">
                                        <span class="text-3xl">ğŸ¥</span>
                                    </div>
                                    <p class="font-semibold">Video</p>
                                    <p class="text-sm opacity-90">Ditonton</p>
                                </div>
                                <div class="text-center">
                                    <div class="w-20 h-20 bg-yellow-400 rounded-full flex items-center justify-center mx-auto mb-3 shadow-lg">
                                        <span class="text-3xl">ğŸ®</span>
                                    </div>
                                    <p class="font-semibold">Game</p>
                                    <p class="text-sm opacity-90">Dimainkan</p>
                                </div>
                                <div class="text-center">
                                    <div class="w-20 h-20 bg-yellow-400 rounded-full flex items-center justify-center mx-auto mb-3 shadow-lg">
                                        <span class="text-3xl">âœï¸</span>
                                    </div>
                                    <p class="font-semibold">Latihan</p>
                                    <p class="text-sm opacity-90">Diselesaikan</p>
                                </div>
                            </div>

                            <div class="text-center">
                                <p class="text-lg opacity-90 mb-4">Tanggal: <span id="certificateDate" class="font-semibold"></span></p>
                                <div class="flex justify-center space-x-16">
                                    <div class="text-center">
                                        <div class="border-t-2 border-yellow-400 w-40 mx-auto pt-3">
                                            <p class="font-bold">Guru Al-Quran Hadits</p>
                                            <p class="text-sm opacity-90">MI Kelas 4</p>
                                        </div>
                                    </div>
                                    <div class="text-center">
                                        <div class="border-t-2 border-yellow-400 w-40 mx-auto pt-3">
                                            <p class="font-bold">Kepala Madrasah</p>
                                            <p class="text-sm opacity-90">MI</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="text-center mt-10">
                        <button onclick="downloadCertificate()" 
                                class="bg-gradient-to-r from-blue-600 to-indigo-600 text-white px-10 py-5 rounded-2xl font-bold text-xl hover:from-blue-700 hover:to-indigo-700 transition duration-300 shadow-2xl">
                            ğŸ“¥ Unduh Sertifikat
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentStudent = { name: '', class: '' };
        let canvas, ctx, backgroundCanvas, backgroundCtx, freeCanvas, freeCtx;
        let isDrawing = false;
        let currentColor = 'black';
        let currentStroke = 3;
        let currentWritingMode = 'trace';
        let currentAyat = 1;
        let ayatProgress = { 1: false, 2: false, 3: false };
        
        // Progress tracking
        let learningProgress = {
            materi: false,
            video: false,
            game: false,
            latihan: false
        };
        
        // Video recording variables
        let mediaRecorder;
        let recordedChunks = [];
        let stream;
        let recordingTimer;
        let recordingStartTime;
        let submissionHistory = [];

        // Game variables
        let gameScore = 0;
        let currentQuestionIndex = 0;
        let gameQuestions = [
            { arabic: 'ÙˆÙØ§Ù„Ù’Ø¹ÙØµÙ’Ø±Ù', correct: 'Demi masa', options: ['Demi masa', 'Demi waktu', 'Demi hari', 'Demi malam'] },
            { arabic: 'Ø¥ÙÙ†ÙÙ‘', correct: 'Sesungguhnya', options: ['Sesungguhnya', 'Sungguh', 'Benar', 'Pasti'] },
            { arabic: 'Ø§Ù„Ù’Ø¥ÙÙ†Ø³ÙØ§Ù†Ù', correct: 'Manusia', options: ['Manusia', 'Orang', 'Makhluk', 'Hamba'] },
            { arabic: 'Ø®ÙØ³Ù’Ø±Ù', correct: 'Kerugian', options: ['Kerugian', 'Keuntungan', 'Kesedihan', 'Kebahagiaan'] },
            { arabic: 'Ø¥ÙÙ„ÙÙ‘Ø§', correct: 'Kecuali', options: ['Kecuali', 'Selain', 'Hanya', 'Tetapi'] },
            { arabic: 'Ø¢Ù…ÙÙ†ÙÙˆØ§', correct: 'Beriman', options: ['Beriman', 'Percaya', 'Yakin', 'Taat'] },
            { arabic: 'Ø§Ù„ØµÙÙ‘Ø§Ù„ÙØ­ÙØ§ØªÙ', correct: 'Amal saleh', options: ['Amal saleh', 'Perbuatan baik', 'Kebaikan', 'Ibadah'] },
            { arabic: 'ØªÙÙˆÙØ§ØµÙÙˆÙ’Ø§', correct: 'Saling menasehati', options: ['Saling menasehati', 'Menasehati', 'Berpesan', 'Mengajak'] },
            { arabic: 'Ø§Ù„Ù’Ø­ÙÙ‚ÙÙ‘', correct: 'Kebenaran', options: ['Kebenaran', 'Yang benar', 'Hak', 'Kenyataan'] },
            { arabic: 'Ø§Ù„ØµÙÙ‘Ø¨Ù’Ø±Ù', correct: 'Kesabaran', options: ['Kesabaran', 'Sabar', 'Ketabahan', 'Ketekunan'] }
        ];

        // Form submission
        document.getElementById('studentForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const name = document.getElementById('nameInput').value;
            const studentClass = document.getElementById('classInput').value;
            
            currentStudent.name = name;
            currentStudent.class = studentClass;
            
            // Update header
            document.getElementById('studentName').textContent = name;
            document.getElementById('studentClass').textContent = `Kelas ${studentClass}`;
            document.getElementById('studentInfo').classList.remove('hidden');
            
            // Update certificate
            document.getElementById('certificateName').textContent = name;
            document.getElementById('certificateClass').textContent = studentClass;
            document.getElementById('certificateDate').textContent = new Date().toLocaleDateString('id-ID');
            
            // Hide form, show content
            document.getElementById('loginForm').classList.add('hidden');
            document.getElementById('learningContent').classList.remove('hidden');
            
            // Initialize canvas and game
            setTimeout(() => {
                initCanvas();
                initGame();
                
                // Add click event listeners to all tab buttons
                document.querySelectorAll('.tab-btn').forEach(btn => {
                    btn.addEventListener('click', function(e) {
                        e.preventDefault();
                        const tabName = this.id.replace('tab-', '');
                        showTab(tabName);
                    });
                });
                
                console.log('Tab event listeners added');
            }, 100);
        });

        // Progress tracking functions
        function updateProgress(section) {
            learningProgress[section] = true;
            updateProgressDisplay();
        }
        
        function updateProgressDisplay() {
            // Update individual progress icons
            const progressIcons = {
                materi: learningProgress.materi ? 'âœ…' : 'ğŸ“š',
                video: learningProgress.video ? 'âœ…' : 'ğŸ¥',
                game: learningProgress.game ? 'âœ…' : 'ğŸ®',
                latihan: learningProgress.latihan ? 'âœ…' : 'âœï¸'
            };
            
            Object.keys(progressIcons).forEach(key => {
                const element = document.getElementById(`${key}Progress`);
                if (element) {
                    element.textContent = progressIcons[key];
                    // Update background color for completed sections
                    const parent = element.parentElement;
                    if (learningProgress[key]) {
                        parent.className = 'w-8 h-8 rounded-full bg-green-200 flex items-center justify-center mx-auto mb-1';
                    } else {
                        parent.className = 'w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center mx-auto mb-1';
                    }
                }
            });
            
            // Calculate overall progress
            const completedSections = Object.values(learningProgress).filter(Boolean).length;
            const totalSections = Object.keys(learningProgress).length;
            const percentage = Math.round((completedSections / totalSections) * 100);
            
            // Update progress bar
            const progressBar = document.getElementById('overallProgress');
            const progressText = document.getElementById('progressPercentage');
            
            if (progressBar) {
                progressBar.style.width = `${percentage}%`;
            }
            if (progressText) {
                progressText.textContent = percentage;
            }
        }

        // Tab functionality
        function showTab(tabName) {
            console.log('Switching to tab:', tabName); // Debug log
            
            // Hide all content
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.add('hidden');
            });
            
            // Remove active class from all tabs
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.className = 'tab-btn px-6 py-4 mx-1 mb-2 rounded-2xl font-bold text-lg transition duration-300 text-gray-700 hover:bg-blue-50 hover:text-blue-600';
            });
            
            // Show selected content
            const contentElement = document.getElementById(`content-${tabName}`);
            if (contentElement) {
                contentElement.classList.remove('hidden');
            } else {
                console.error('Content element not found:', `content-${tabName}`);
            }
            
            // Add active class to selected tab
            const activeTab = document.getElementById(`tab-${tabName}`);
            if (activeTab) {
                activeTab.className = 'tab-btn px-6 py-4 mx-1 mb-2 rounded-2xl font-bold text-lg transition duration-300 bg-blue-600 text-white shadow-lg hover:bg-blue-700';
            } else {
                console.error('Tab element not found:', `tab-${tabName}`);
            }
            
            // Mark section as visited and update progress
            if (tabName === 'materi') {
                updateProgress('materi');
            }
            
            // Initialize specific tab content if needed
            if (tabName === 'latihan' && !canvas) {
                setTimeout(() => {
                    initCanvas();
                }, 100);
            }
            
            if (tabName === 'game' && gameScore === 0 && currentQuestionIndex === 0) {
                setTimeout(() => {
                    initGame();
                }, 100);
            }
            
            if (tabName === 'video') {
                initVideoTab();
            }
        }

        // Game functionality
        function initGame() {
            gameScore = 0;
            currentQuestionIndex = 0;
            updateGameDisplay();
            showQuestion();
        }

        function updateGameDisplay() {
            document.getElementById('gameScore').textContent = gameScore;
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
        }

        function showQuestion() {
            if (currentQuestionIndex >= gameQuestions.length) {
                showGameComplete();
                return;
            }

            const question = gameQuestions[currentQuestionIndex];
            document.getElementById('arabicWord').textContent = question.arabic;
            
            const optionsContainer = document.getElementById('gameOptions');
            optionsContainer.innerHTML = '';
            
            question.options.forEach((option, index) => {
                const optionDiv = document.createElement('div');
                optionDiv.className = 'game-card bg-white rounded-2xl p-6 shadow-lg border-2 border-gray-200';
                optionDiv.innerHTML = `
                    <div class="text-center">
                        <span class="text-2xl font-bold text-gray-800">${option}</span>
                    </div>
                `;
                optionDiv.onclick = () => selectAnswer(option, optionDiv);
                optionsContainer.appendChild(optionDiv);
            });

            document.getElementById('gameResult').classList.add('hidden');
        }

        function selectAnswer(selectedAnswer, element) {
            const question = gameQuestions[currentQuestionIndex];
            const isCorrect = selectedAnswer === question.correct;
            
            // Disable all options
            document.querySelectorAll('.game-card').forEach(card => {
                card.onclick = null;
                card.style.cursor = 'default';
            });
            
            // Show result
            if (isCorrect) {
                element.classList.add('correct');
                gameScore++;
                document.getElementById('resultTitle').textContent = 'ğŸ‰ Benar!';
                document.getElementById('resultMessage').textContent = `Jawaban yang tepat adalah "${selectedAnswer}"`;
            } else {
                element.classList.add('incorrect');
                document.getElementById('resultTitle').textContent = 'âŒ Salah!';
                document.getElementById('resultMessage').textContent = `Jawaban yang benar adalah "${question.correct}"`;
                
                // Highlight correct answer
                document.querySelectorAll('.game-card').forEach(card => {
                    if (card.textContent.trim() === question.correct) {
                        card.classList.add('correct');
                    }
                });
            }
            
            updateGameDisplay();
            document.getElementById('gameResult').classList.remove('hidden');
        }

        function nextQuestion() {
            currentQuestionIndex++;
            showQuestion();
        }

        function showGameComplete() {
            document.getElementById('gameArea').classList.add('hidden');
            document.getElementById('finalScore').textContent = gameScore;
            document.getElementById('gameComplete').classList.remove('hidden');
            
            // Mark game as completed
            updateProgress('game');
        }

        function restartGame() {
            document.getElementById('gameArea').classList.remove('hidden');
            document.getElementById('gameComplete').classList.add('hidden');
            initGame();
        }

        // Canvas functionality
        function initCanvas() {
            // Initialize tracing canvas
            canvas = document.getElementById('drawingCanvas');
            backgroundCanvas = document.getElementById('backgroundCanvas');
            freeCanvas = document.getElementById('freeCanvas');
            
            if (canvas && backgroundCanvas) {
                ctx = canvas.getContext('2d');
                backgroundCtx = backgroundCanvas.getContext('2d');
                
                setupCanvas(canvas, ctx);
                setupCanvas(backgroundCanvas, backgroundCtx);
                
                // Draw initial ayat
                drawAyatBackground(currentAyat);
            }
            
            if (freeCanvas) {
                freeCtx = freeCanvas.getContext('2d');
                setupCanvas(freeCanvas, freeCtx);
            }
        }

        function setupCanvas(canvasElement, context) {
            const rect = canvasElement.getBoundingClientRect();
            canvasElement.width = rect.width * 2;
            canvasElement.height = rect.height * 2;
            canvasElement.style.width = rect.width + 'px';
            canvasElement.style.height = rect.height + 'px';
            context.scale(2, 2);
            
            context.lineCap = 'round';
            context.lineJoin = 'round';
            context.strokeStyle = currentColor;
            context.lineWidth = currentStroke;
            
            // Add event listeners only to drawing canvas
            if (canvasElement.id === 'drawingCanvas' || canvasElement.id === 'freeCanvas') {
                canvasElement.addEventListener('mousedown', startDrawing);
                canvasElement.addEventListener('mousemove', draw);
                canvasElement.addEventListener('mouseup', stopDrawing);
                canvasElement.addEventListener('mouseout', stopDrawing);
                
                canvasElement.addEventListener('touchstart', handleTouch);
                canvasElement.addEventListener('touchmove', handleTouch);
                canvasElement.addEventListener('touchend', stopDrawing);
            }
        }

        function drawAyatBackground(ayatNumber) {
            if (!backgroundCtx) return;
            
            backgroundCtx.clearRect(0, 0, backgroundCanvas.width, backgroundCanvas.height);
            
            const ayatTexts = {
                1: 'ÙˆÙØ§Ù„Ù’Ø¹ÙØµÙ’Ø±Ù',
                2: 'Ø¥ÙÙ†ÙÙ‘ Ø§Ù„Ù’Ø¥ÙÙ†Ø³ÙØ§Ù†Ù Ù„ÙÙÙÙŠ Ø®ÙØ³Ù’Ø±Ù',
                3: 'Ø¥ÙÙ„ÙÙ‘Ø§ Ø§Ù„ÙÙ‘Ø°ÙÙŠÙ†Ù Ø¢Ù…ÙÙ†ÙÙˆØ§ ÙˆÙØ¹ÙÙ…ÙÙ„ÙÙˆØ§ Ø§Ù„ØµÙÙ‘Ø§Ù„ÙØ­ÙØ§ØªÙ ÙˆÙØªÙÙˆÙØ§ØµÙÙˆÙ’Ø§ Ø¨ÙØ§Ù„Ù’Ø­ÙÙ‚ÙÙ‘ ÙˆÙØªÙÙˆÙØ§ØµÙÙˆÙ’Ø§ Ø¨ÙØ§Ù„ØµÙÙ‘Ø¨Ù’Ø±Ù'
            };
            
            const text = ayatTexts[ayatNumber];
            const fontSize = ayatNumber === 3 ? 40 : 60;
            
            backgroundCtx.font = `${fontSize}px Amiri, serif`;
            backgroundCtx.fillStyle = 'rgba(59, 130, 246, 0.2)';
            backgroundCtx.textAlign = 'center';
            backgroundCtx.direction = 'rtl';
            
            const centerX = backgroundCanvas.width / 4;
            const centerY = backgroundCanvas.height / 4;
            
            // Draw dashed outline
            backgroundCtx.setLineDash([10, 10]);
            backgroundCtx.strokeStyle = 'rgba(59, 130, 246, 0.5)';
            backgroundCtx.lineWidth = 3;
            backgroundCtx.strokeText(text, centerX, centerY);
            
            // Fill with light color
            backgroundCtx.setLineDash([]);
            backgroundCtx.fillText(text, centerX, centerY);
        }

        function startDrawing(e) {
            isDrawing = true;
            const activeCanvas = currentWritingMode === 'free' ? freeCanvas : canvas;
            const activeCtx = currentWritingMode === 'free' ? freeCtx : ctx;
            const rect = activeCanvas.getBoundingClientRect();
            activeCtx.beginPath();
            activeCtx.moveTo(e.clientX - rect.left, e.clientY - rect.top);
        }

        function draw(e) {
            if (!isDrawing) return;
            const activeCanvas = currentWritingMode === 'free' ? freeCanvas : canvas;
            const activeCtx = currentWritingMode === 'free' ? freeCtx : ctx;
            const rect = activeCanvas.getBoundingClientRect();
            activeCtx.lineTo(e.clientX - rect.left, e.clientY - rect.top);
            activeCtx.stroke();
        }

        function stopDrawing() {
            if (isDrawing && currentWritingMode === 'trace') {
                // Mark current ayat as practiced
                ayatProgress[currentAyat] = true;
                updateAyatProgressDisplay();
                
                // Check if all ayats are completed
                const allCompleted = Object.values(ayatProgress).every(Boolean);
                if (allCompleted) {
                    updateProgress('latihan');
                }
            }
            isDrawing = false;
        }

        function handleTouch(e) {
            e.preventDefault();
            const touch = e.touches[0];
            const mouseEvent = new MouseEvent(e.type === 'touchstart' ? 'mousedown' : 
                                            e.type === 'touchmove' ? 'mousemove' : 'mouseup', {
                clientX: touch.clientX,
                clientY: touch.clientY
            });
            const activeCanvas = currentWritingMode === 'free' ? freeCanvas : canvas;
            activeCanvas.dispatchEvent(mouseEvent);
        }

        function clearCanvas() {
            const activeCtx = currentWritingMode === 'free' ? freeCtx : ctx;
            const activeCanvas = currentWritingMode === 'free' ? freeCanvas : canvas;
            if (activeCtx) {
                activeCtx.clearRect(0, 0, activeCanvas.width, activeCanvas.height);
            }
        }

        function changeColor(color) {
            currentColor = color;
            if (ctx) ctx.strokeStyle = color;
            if (freeCtx) freeCtx.strokeStyle = color;
        }

        function changeStroke(width) {
            currentStroke = width;
            if (ctx) ctx.lineWidth = width;
            if (freeCtx) freeCtx.lineWidth = width;
        }

        // Writing mode functions
        function setWritingMode(mode) {
            currentWritingMode = mode;
            
            // Update button styles
            document.getElementById('traceMode').className = mode === 'trace' ? 
                'px-6 py-3 rounded-xl font-bold transition duration-300 bg-blue-600 text-white' :
                'px-6 py-3 rounded-xl font-bold transition duration-300 text-gray-700 hover:bg-gray-200';
            
            document.getElementById('freeMode').className = mode === 'free' ? 
                'px-6 py-3 rounded-xl font-bold transition duration-300 bg-blue-600 text-white' :
                'px-6 py-3 rounded-xl font-bold transition duration-300 text-gray-700 hover:bg-gray-200';
            
            // Show/hide appropriate sections
            if (mode === 'trace') {
                document.getElementById('tracingExercise').classList.remove('hidden');
                document.getElementById('freeWriting').classList.add('hidden');
            } else {
                document.getElementById('tracingExercise').classList.add('hidden');
                document.getElementById('freeWriting').classList.remove('hidden');
            }
        }

        function selectAyat(ayatNumber) {
            currentAyat = ayatNumber;
            
            // Update button styles
            document.querySelectorAll('.ayat-btn').forEach(btn => {
                btn.className = 'ayat-btn px-4 py-2 rounded-lg font-bold text-blue-600 hover:bg-blue-50';
            });
            document.getElementById(`ayat${ayatNumber}Btn`).className = 'ayat-btn px-4 py-2 rounded-lg font-bold bg-blue-600 text-white';
            
            // Clear canvas and draw new background
            if (ctx) ctx.clearRect(0, 0, canvas.width, canvas.height);
            drawAyatBackground(ayatNumber);
        }

        function updateAyatProgressDisplay() {
            for (let i = 1; i <= 3; i++) {
                const progressElement = document.getElementById(`ayat${i}Progress`);
                progressElement.textContent = ayatProgress[i] ? 'âœ…' : 'â­•';
            }
        }

        // Video recording functions
        async function startRecording() {
            try {
                stream = await navigator.mediaDevices.getUserMedia({ 
                    video: true, 
                    audio: true 
                });
                
                recordedChunks = [];
                mediaRecorder = new MediaRecorder(stream);
                
                mediaRecorder.ondataavailable = function(event) {
                    if (event.data.size > 0) {
                        recordedChunks.push(event.data);
                    }
                };
                
                mediaRecorder.onstop = function() {
                    const blob = new Blob(recordedChunks, { type: 'video/webm' });
                    const videoURL = URL.createObjectURL(blob);
                    const videoElement = document.getElementById('recordedVideo');
                    videoElement.src = videoURL;
                    videoElement.classList.remove('hidden');
                    document.getElementById('uploadSection').classList.remove('hidden');
                };
                
                mediaRecorder.start();
                
                // Update UI
                document.getElementById('startBtn').disabled = true;
                document.getElementById('startBtn').className = 'bg-gradient-to-r from-gray-400 to-gray-500 text-white px-8 py-4 rounded-xl font-bold text-lg transition duration-300 shadow-lg';
                document.getElementById('stopBtn').disabled = false;
                document.getElementById('stopBtn').className = 'bg-gradient-to-r from-red-500 to-red-600 text-white px-8 py-4 rounded-xl font-bold text-lg hover:from-red-600 hover:to-red-700 transition duration-300 shadow-lg';
                
                document.getElementById('recordIcon').textContent = 'ğŸ”´';
                document.getElementById('recordStatus').textContent = 'Sedang merekam...';
                document.getElementById('recordingTimer').classList.remove('hidden');
                
                // Start timer
                recordingStartTime = Date.now();
                recordingTimer = setInterval(updateTimer, 1000);
                
            } catch (error) {
                alert('Tidak dapat mengakses kamera/mikrofon. Pastikan Anda memberikan izin akses.');
                console.error('Error accessing media devices:', error);
            }
        }

        function stopRecording() {
            if (mediaRecorder && mediaRecorder.state === 'recording') {
                mediaRecorder.stop();
                stream.getTracks().forEach(track => track.stop());
                
                // Update UI
                document.getElementById('startBtn').disabled = false;
                document.getElementById('startBtn').className = 'bg-gradient-to-r from-red-500 to-red-600 text-white px-8 py-4 rounded-xl font-bold text-lg hover:from-red-600 hover:to-red-700 transition duration-300 shadow-lg';
                document.getElementById('stopBtn').disabled = true;
                document.getElementById('stopBtn').className = 'bg-gradient-to-r from-gray-400 to-gray-500 text-white px-8 py-4 rounded-xl font-bold text-lg transition duration-300 shadow-lg';
                
                document.getElementById('recordIcon').textContent = 'âœ…';
                document.getElementById('recordStatus').textContent = 'Perekaman selesai';
                document.getElementById('recordingTimer').classList.add('hidden');
                
                clearInterval(recordingTimer);
            }
        }

        function updateTimer() {
            const elapsed = Math.floor((Date.now() - recordingStartTime) / 1000);
            const minutes = Math.floor(elapsed / 60);
            const seconds = elapsed % 60;
            document.getElementById('timerDisplay').textContent = 
                `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            
            // Auto stop at 3 minutes
            if (elapsed >= 180) {
                stopRecording();
            }
        }

        function submitVideo() {
            const title = document.getElementById('videoTitle').value || 'Video Bacaan Surah Al-Ashr';
            const notes = document.getElementById('videoNotes').value || '';
            const timestamp = new Date().toLocaleString('id-ID');
            
            // Simulate submission (in real app, this would upload to server)
            const submission = {
                title: title,
                notes: notes,
                timestamp: timestamp,
                student: currentStudent.name,
                class: currentStudent.class
            };
            
            submissionHistory.push(submission);
            updateSubmissionHistory();
            
            // Mark video section as completed
            updateProgress('video');
            
            // Show success message
            alert('âœ… Video berhasil dikirim ke guru!\n\nGuru akan memberikan feedback dalam 1-2 hari kerja.');
            
            // Reset form
            document.getElementById('videoTitle').value = '';
            document.getElementById('videoNotes').value = '';
            document.getElementById('uploadSection').classList.add('hidden');
            document.getElementById('recordedVideo').classList.add('hidden');
            document.getElementById('recordIcon').textContent = 'ğŸ¥';
            document.getElementById('recordStatus').textContent = 'Siap untuk merekam';
        }

        function retakeVideo() {
            document.getElementById('uploadSection').classList.add('hidden');
            document.getElementById('recordedVideo').classList.add('hidden');
            document.getElementById('recordIcon').textContent = 'ğŸ¥';
            document.getElementById('recordStatus').textContent = 'Siap untuk merekam';
        }

        function updateSubmissionHistory() {
            const historyContainer = document.getElementById('submissionHistory');
            
            if (submissionHistory.length === 0) {
                historyContainer.innerHTML = '<p class="text-blue-600 text-center italic">Belum ada video yang dikirim</p>';
                return;
            }
            
            historyContainer.innerHTML = submissionHistory.map((submission, index) => `
                <div class="bg-white rounded-xl p-4 shadow-lg border-l-4 border-blue-500">
                    <div class="flex justify-between items-start">
                        <div>
                            <h5 class="font-bold text-gray-800">${submission.title}</h5>
                            <p class="text-gray-600 text-sm">${submission.timestamp}</p>
                            ${submission.notes ? `<p class="text-gray-700 mt-2 text-sm">${submission.notes}</p>` : ''}
                        </div>
                        <span class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-semibold">Terkirim</span>
                    </div>
                </div>
            `).join('');
        }

        // Video handling functions
        function checkVideoLoad() {
            const iframe = document.getElementById('youtubeVideo');
            const fallback = document.getElementById('videoFallback');
            
            // Set timeout to show fallback if video doesn't load
            setTimeout(() => {
                try {
                    // Check if iframe is accessible and loaded
                    if (!iframe.contentWindow) {
                        showVideoFallback();
                    }
                } catch (error) {
                    console.log('Video may be blocked, showing fallback');
                    showVideoFallback();
                }
            }, 5000);
        }
        
        function showVideoFallback() {
            const iframe = document.getElementById('youtubeVideo');
            const fallback = document.getElementById('videoFallback');
            
            iframe.style.display = 'none';
            fallback.classList.remove('hidden');
        }
        
        function retryVideo() {
            const iframe = document.getElementById('youtubeVideo');
            const fallback = document.getElementById('videoFallback');
            
            // Hide fallback and show iframe
            fallback.classList.add('hidden');
            iframe.style.display = 'block';
            
            // Reload iframe
            const currentSrc = iframe.src;
            iframe.src = '';
            setTimeout(() => {
                iframe.src = currentSrc;
            }, 100);
            
            // Check again after retry
            setTimeout(checkVideoLoad, 1000);
        }
        
        // Initialize video check when video tab is opened
        function initVideoTab() {
            setTimeout(checkVideoLoad, 1000);
        }

        function downloadCertificate() {
            // Create a temporary canvas for the certificate
            const certificateCanvas = document.createElement('canvas');
            const certificateCtx = certificateCanvas.getContext('2d');
            
            certificateCanvas.width = 1200;
            certificateCanvas.height = 800;
            
            // Draw certificate background
            const gradient = certificateCtx.createLinearGradient(0, 0, 1200, 800);
            gradient.addColorStop(0, '#1e3a8a');
            gradient.addColorStop(0.5, '#3730a3');
            gradient.addColorStop(1, '#581c87');
            certificateCtx.fillStyle = gradient;
            certificateCtx.fillRect(0, 0, 1200, 800);
            
            // Add golden border
            certificateCtx.strokeStyle = '#fbbf24';
            certificateCtx.lineWidth = 24;
            certificateCtx.strokeRect(12, 12, 1176, 776);
            
            // Inner border
            certificateCtx.strokeStyle = '#fcd34d';
            certificateCtx.lineWidth = 8;
            certificateCtx.strokeRect(40, 40, 1120, 720);
            
            // Add text
            certificateCtx.fillStyle = '#fef3c7';
            certificateCtx.font = 'bold 48px Arial';
            certificateCtx.textAlign = 'center';
            certificateCtx.fillText('SERTIFIKAT', 600, 120);
            
            certificateCtx.font = '28px Arial';
            certificateCtx.fillText('Media Pembelajaran Al-Quran Hadits', 600, 160);
            
            certificateCtx.font = '24px Arial';
            certificateCtx.fillText('Dengan bangga diberikan kepada:', 600, 220);
            
            certificateCtx.fillStyle = '#fbbf24';
            certificateCtx.font = 'bold 42px Arial';
            certificateCtx.fillText(currentStudent.name, 600, 300);
            
            certificateCtx.fillStyle = '#fef3c7';
            certificateCtx.font = '24px Arial';
            certificateCtx.fillText(`Kelas: ${currentStudent.class}`, 600, 340);
            
            certificateCtx.fillText('Telah berhasil menyelesaikan pembelajaran', 600, 420);
            
            certificateCtx.fillStyle = '#fbbf24';
            certificateCtx.font = 'bold 36px Arial';
            certificateCtx.fillText('SURAH AL-ASHR', 600, 480);
            
            certificateCtx.fillStyle = '#fef3c7';
            certificateCtx.font = '20px Arial';
            certificateCtx.fillText('dengan prestasi yang membanggakan', 600, 520);
            
            certificateCtx.fillText(`Tanggal: ${new Date().toLocaleDateString('id-ID')}`, 600, 620);
            
            certificateCtx.font = 'bold 18px Arial';
            certificateCtx.fillText('Guru Al-Quran Hadits', 400, 720);
            certificateCtx.fillText('Kepala Madrasah', 800, 720);
            
            // Download
            const link = document.createElement('a');
            link.download = `Sertifikat_${currentStudent.name.replace(/\s+/g, '_')}_Surah_Al-Ashr.png`;
            link.href = certificateCanvas.toDataURL('image/png', 1.0);
            link.click();
        }
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'96dd483d943287ea',t:'MTc1NDk3MzQ5Ni4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
